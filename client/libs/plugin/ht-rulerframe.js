!function(E,i){"use strict";function Q(E){return T().createElement(E)}function j(){return Q("canvas")}function w(E,i,Q){E.style.setProperty(i,Q,g7)}function d(E,i){E.appendChild(i)}function k(E,i){E.removeChild(i)}var r,O="position",g="absolute",N="px",X="left",e="right",p="top",a="bottom",K="display",F=ht.Default,A=F.getInternal(),P=Math.floor,y=Math.ceil,Z=Math.PI,g7=null,h=E.parseInt,T=function(){return document},s=(A=F.getInternal()).addEventListener,o=A.removeEventListener;ht.widget.RulerFrame=function(E){var Q=this,r=Q._view=A.createView(null,Q),i=Q.$1k=j(),F=Q.$2k=j(),k=Q.$3k=j(),y=Q.$4k=j();Q._defaultRulerConfig={size:20,borderWidth:1,borderStyle:"solid",borderColor:"#888",defaultMajorTickSpacing:50,minMajorTickSpacing:10,minPhysicalMajorTickSpacing:40,maxPhysicalMajorTickSpacing:100,tickSpacingAdaptable:!0,majorTickTextFont:"12px Arial",majorTickTextColor:"#666",majorTickColor:"#888",minorTickColor:"#ccc",background:"rgba(0,0,0,0)",guideColor:"rgb(0, 173, 239)",guideWidth:2,guideVisible:!1,guideTipVisible:!1,guideTipBorderColor:"#666",guideTipTextColor:"#666",guideTipTextFont:"12px Arial",guideTipBackground:"#fff"},Q._topRulerConfig={visible:!0},Q._rightRulerConfig={visible:!1},Q._bottomRulerConfig={visible:!1},Q._leftRulerConfig={visible:!0},d(r,i),d(r,k),d(r,F),d(r,y),w(r,O,"relative"),w(r,"box-sizing","border-box"),w(r,"-moz-box-sizing","border-box"),w(i,O,g),w(F,O,g),w(k,O,g),w(y,O,g),Q.$14k=function(E){Q.$13k=1,Q.iv()},Q.$15k=function(E){var i;(Q._topRulerConfig.guideVisible||Q._rightRulerConfig.guideVisible||Q._bottomRulerConfig.guideVisible||Q._leftRulerConfig.guideVisible||Q._defaultRulerConfig.guideVisible||(Q._topRulerConfig.guideTipVisible||Q._rightRulerConfig.guideTipVisible||Q._bottomRulerConfig.guideTipVisible||Q._leftRulerConfig.guideTipVisible||Q._defaultRulerConfig.guideTipVisible)&&Q._component)&&(i=r.getBoundingClientRect(),Q.$16k={x:E.clientX-i.left,y:E.clientY-i.top},Q.$5k())},Q.setComponent(E)},E="RulerFrame",r={ms_v:1,ms_fire:1,ms_ac:["defaultRulerConfig","topRulerConfig","rightRulerConfig","bottomRulerConfig","leftRulerConfig","component"],setComponent:function(E){var i,Q=this,r=Q._component,F=Q.getView();F&&(Q._component=E,Q.fp("component",r,E),r&&(i=Q.getComponentView(r),k(F,i),o(F,"mousemove",Q.$15k),Q.removeComponentPropertyChangeListener(r,Q.$14k)),E&&(i=Q.getComponentView(E),d(F,i),w(i,O,g),s(F,"mousemove",Q.$15k),Q.addComponentPropertyChangeListener(E,Q.$14k)))},addComponentPropertyChangeListener:function(E,i){E&&E.mp&&E.mp(i)},removeComponentPropertyChangeListener:function(E,i){E&&E.ump&&E.ump(i)},getComponentHZoom:function(E){return E&&E.getZoom?E.getZoom():1},getComponentVZoom:function(E){return E&&E.getZoom?E.getZoom():1},getComponentViewRect:function(E){if(E&&E.getViewRect)return E.getViewRect()},getComponentView:function(E){return E&&E.getView?E.getView():E},invalidateComponent:function(E){E&&E.iv&&E.iv()},validateComponent:function(E){E&&E.validate&&E.validate()},$7k:function(E,i,Q,r,F,k,y,j,d,O,g,T){var s,o,N,X,e;i.visible?(e=this._defaultRulerConfig,s=i[s="borderStyle"]||e[s],o=i[o="borderColor"]||e[o],N=i[N="borderWidth"]||e[N],X=(i.size!=g7?i:e).size,e=i[i="background"]||e[i],i=this.$6k(N,s,o,E,Q,F,X+N,y,j,d,O,g,T),w(E,F,"0px"),k?A.setCanvas(E,r-i,X):A.setCanvas(E,X,r-i),w(E,"background",e),w(E,K,"block")):(w(E,K,"none"),w(this.getComponentView(this._component),F,"0px"))},$6k:function(E,i,Q,r,F,k,y,j,d,O,g,T,s){var o=0;return w(r,F,E+"px "+i+" "+Q),w(this.getComponentView(this._component),k,y+N),j?(w(r,d,O+N),o+=O):w(r,d,"0px"),g?(w(r,T,s+N),o+=s):w(r,T,"0px"),o},validateImpl:function(){var E,i,Q,r=this,F=r._component,k=r.$1k,y=r.$2k,j=r.$3k,d=r.$4k,O=r._view,g=r._defaultRulerConfig,T=r._topRulerConfig,s=r._rightRulerConfig,o=r._bottomRulerConfig,N=r._leftRulerConfig,g=g.size;O&&F&&(E=T.size!=g7?T.size:g,i=s.size!=g7?s.size:g,Q=o.size!=g7?o.size:g,g=N.size!=g7?N.size:g,r.$7k(k,T,"border-bottom",O.offsetWidth,p,!0,N.visible,X,g,s.visible,e,i),r.$7k(y,s,"border-left",O.offsetHeight,e,!1,T.visible,p,E,o.visible,a,Q),r.$7k(j,o,"border-top",O.offsetWidth,a,!0,N.visible,X,g,s.visible,e,i),r.$7k(d,N,"border-right",O.offsetHeight,X,!1,T.visible,p,E,o.visible,a,Q),r.$13k?delete r.$13k:r.invalidateComponent(F),r.validateComponent(F),r.$5k())},$5k:function(){var t=this,E=t.$1k,i=t.$2k,Q=t.$3k,r=t.$4k,F=t._topRulerConfig,k=t._rightRulerConfig,y=t._bottomRulerConfig,j=t._leftRulerConfig,d=t._defaultRulerConfig,O=t._component,g=t.getComponentViewRect(O),D=t.getComponentHZoom(O),n=t.getComponentVZoom(O),A=g.x*D,P=A+g.width*D,Z=g.y*n,h=Z+g.height*n,M=t._defaultRulerConfig.size,z="defaultMajorTickSpacing",W="maxPhysicalMajorTickSpacing",l="minPhysicalMajorTickSpacing",f="tickSpacingAdaptable",v="majorTickTextFont",G="majorTickTextColor",S="majorTickColor",m="minorTickColor",L="guideVisible",V="guideTipVisible",R="guideTipBorderColor",U="guideTipTextColor",B="guideTipTextFont",Y="guideTipBackground",J="guideColor",_="guideWidth",C="minMajorTickSpacing",x=d[z],H=d[W],q=d[l],$=d[f],b=d[v],c=d[G],u=d[S],E7=d[C],i7=d[m],Q7=d[L],r7=d[V],F7=d[R],k7=d[U],y7=d[B],j7=d[Y],d7=d[J],O7=d[_];function T(E,i,Q,r,F,k){var y,j,d,O,g,T,s,o,N,X,e,w,p,a,K,I;i.visible&&(E=E.getContext("2d"),y=i[z]||x,I=i[f]!=g7?i[f]:$,j=i[v]||b,d=i[G]||c,O=i.size!=g7?i.size:M,g=i[S]||u,T=i[C]||E7,s=i[m]||i7,o=i[L]!=g7?i[L]:Q7,N=i[V]!=g7?i[V]:r7,X=i[R]!=g7?i[R]:F7,e=i[U]!=g7?i[U]:k7,w=i[B]!=g7?i[B]:y7,p=i[Y]!=g7?i[Y]:j7,a=i[J]||d7,K=i[_]||O7,I&&(y=t[k]=t.$8k(t[k]||y,i[W]||H,i[l]||q,r?D:n,T)),Q.call(t,E,A,Z,P,h,O,r?D:n,y,j,d,F,g,s),I=t.$16k,(o||N)&&I&&(r?t.$9k(E,I.x,O,a,K,o,N,X,e,w,p):t.$10k(E,I.y,O,a,K,o,N,X,e,w,p,F)))}t._view&&O&&(T(E,F,t.$11k,!0,!1,"_currentTopMajorTickSpacing"),T(i,k,t.$12k,!1,!0,"_currentRightMajorTickSpacing"),T(Q,y,t.$11k,!0,!0,"_currentBottomMajorTickSpacing"),T(r,j,t.$12k,!1,!1,"_currenLeftMajorTickSpacing"))},$8k:function(E,i,Q,r,F){return E*r<Q?E=P(i/r/F)*F:i<E*r&&(E=y(Q/r/F)*F),E},getHTipText:function(E){var i=this._component,Q=0,r=this._view.getBoundingClientRect();return i.lp?Q=h(i.lp({x:E.x+r.left,y:E.y}).x):Q-=h(this.getComponentView(i).style.left)||0,Q},$9k:function(E,i,Q,r,F,k,y,j,d,O,g){var T=this._component,T=(E.save(),A.translateAndScale(E,0,0,1),i-(h(this.getComponentView(T).style.left)||0));i=this.getHTipText(this.$16k),k&&(E.beginPath(),E.fillStyle=r,E.rect(T,0,F,Q),E.fill()),y&&(E.beginPath(),E.textAlign="center",E.textBaseline="middle",E.font=O,k=E.measureText(i).width+6,E.fillStyle=g,E.rect(T-k/2,0,k,Q),E.fill(),E.strokeStyle=j,E.stroke(),E.beginPath(),E.fillStyle=d,E.fillText(i,T,0+Q/2)),E.restore()},getVTipText:function(E){var i=this._component,Q=0,r=this._view.getBoundingClientRect();return i.lp?Q=h(i.lp({x:E.x,y:E.y+r.top}).y):Q-=h(this.getComponentView(i).style.top)||0,Q},formatScaleText:function(E){return Math.round(E)},$10k:function(E,i,Q,r,F,k,y,j,d,O,g,T){var s=this._component,o=(E.save(),A.translateAndScale(E,0,0,1),Q/2),s=i-(h(this.getComponentView(s).style.top)||0);i=this.getVTipText(this.$16k),k&&(E.beginPath(),E.fillStyle=r,E.rect(o-Q/2,s,Q,F),E.fill()),y&&(E.translate(o,s),E.rotate((T?90:-90)*Z/180),E.translate(-o,-s),E.beginPath(),E.textAlign="center",E.textBaseline="middle",E.font=O,k=E.measureText(i).width+6,E.fillStyle=g,E.rect(o-k/2,s-Q/2,k,Q),E.fill(),E.strokeStyle=j,E.stroke(),E.fillStyle=d,E.fillText(i,o,s)),E.restore()},$11k:function(E,i,Q,r,F,k,y,j,d,O,g,T,s){E.save();for(var o=i,N=(o+r)/2,X=(r=r-o,A.translateAndScale(E,i=0,0,1),0),e=0,w=h(k/2),p=k-w,a=g?0:w,K=j*y,I=K/10,w=(E.clearRect(i-=K,0,(r+=K)-i,k),E.beginPath(),E.fillStyle=s,P(N/I)*I-o),X=w;X<r;X+=I)E.rect(X,0+a,1,p);for(X=w;i<X;X-=I)E.rect(X,0+a,1,p);for(E.fill(),a=g?0:1,E.beginPath(),E.fillStyle=T,X=w=P(N/K)*K-o;X<r;X+=K)E.rect(X,0+a,1,k-1);for(X=w;i<X;X-=K)E.rect(X,0+a,1,k-1);E.fill();s=(h(/\d+px/.exec(d)[0])||10)/2,E.textBaseline="middle",a=g?k-s-2:2+s,E.beginPath(),E.fillStyle=O,E.font=d,T=P(N/K)*K/y;for(X=w,e=T;X<r;X+=K,e+=j){var t=this.getHScaleText?this.getHScaleText(X):e;E.fillText(this.formatScaleText(t),X+2,0+a)}for(X=w,e=T;i<X;X-=K,e-=j){t=this.getHScaleText?this.getHScaleText(X):e;E.fillText(this.formatScaleText(t),X+2,0+a)}E.restore()},$12k:function(y,E,i,Q,r,F,k,j,d,O,g,T,s){y.save();for(var o=i,N=(o+r)/2,X=(r=r-o,A.translateAndScale(y,i=0,0,1),0),e=this,w=0,p=h(F/2),a=F-p,K=g?0:p,I=j*k,t=I/10,p=(y.clearRect(0,0,F,(r+=I)-(i-=I)),y.beginPath(),y.fillStyle=s,P(N/t)*t-o),X=p;X<r;X+=t)y.rect(0+K,X,a,1);for(X=p;i<X;X-=t)y.rect(0+K,X,a,1);for(y.fill(),K=g?0:1,y.beginPath(),y.fillStyle=T,X=p=P(N/I)*I-o;X<r;X+=I)y.rect(0+K,X,F-1,1);for(X=p;i<X;X-=I)y.rect(0+K,X,F-1,1);y.fill();var s=(h(/\d+px/.exec(d)[0])||10)/2,D=90*Z/180;function n(E,i,Q,r,F,k){F=e.getVScaleText?e.getVScaleText(Q):F,F=e.formatScaleText(F),y.translate(E+i,Q),y.rotate(-r),y.translate(-E-i,-Q),y.fillText(F,E+i+(k?2:1),Q),y.translate(E+i,Q),y.rotate(r),y.translate(-E-i,-Q)}y.textBaseline="middle",K=g?F-s:2+s,D=g?-D:D,y.beginPath(),y.fillStyle=O,y.font=d;T=P(N/I)*I/k;for(X=p,w=T;X<r;X+=I,w+=j)n(0,K,X,D,w,g);for(X=p,w=T;i<X;X-=I,w-=j)n(0,K,X,D,w,g);y.restore()},onPropertyChanged:function(){this.iv()},dispose:function(){var E=this,i=E._component,Q=E._view;i&&E.removeComponentPropertyChangeListener(i,E.$14k),Q&&(o(Q,"mousemove",E.$15k),k(Q.parentNode,Q),E._view=null)}},F.def(ht.widget[E],i,r)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);