!function(d,n){"use strict";function e(){return document}function s(){return _("div")}function b(){return _("canvas")}function z(){return document.body}function M(d,n,e){d.style.setProperty(n,e,Z)}function H(d,n){d.appendChild(n)}function A(d,n){d.removeChild(n)}function w(d){this.$22h=d,this.addListeners()}var p="px",Y="innerHTML",i="className",l=ht.Default,j=ht.Color,X=ht.Node,S="top",a=l.animate,h=l.getInternal(),u="0",L="none",c="max-height",N="font",K="background",J="border-box",o="user-select",U="box-sizing",x="overflow",m=l.isTouchable,W=l.isTouchEvent,h=l.getInternal(),G=j.titleIconBackground,k=l.scrollBarInteractiveSize,V=/msie 9/.test(d.navigator?d.navigator.userAgent.toLowerCase():""),Z=null,_=function(d){return e().createElement(d)},R=h.addEventListener,d=(h.removeEventListener,h.addMethod(l,{paletteExpandIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:G,rotation:3.14}]},paletteCollapseIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:G}]},paletteTitleLabelColor:l.labelSelectColor,paletteTitleLabelFont:l.labelFont,paletteContentLabelFont:l.labelFont,paletteContentLabelColor:"#777",paletteContentBackground:"#fff",paletteTitleHeight:l.widgetTitleHeight,paletteTitleBackground:j.titleBackground,paletteTitleHoverBackground:j.titleBackground,paletteSeparatorWidth:1,paletteSeparatorColor:void 0,paletteItemHoverBorderColor:j.highlight,paletteItemSelectBackground:j.highlight},!0),".palette-item:hover{border: 1px solid "+l.paletteItemHoverBorderColor+" !important} .palette-header:hover{background: "+l.paletteTitleHoverBackground+" !important}"),G=document.createElement("style");m||(G.styleSheet?G.styleSheet.cssText=d:G.appendChild(e().createTextNode(d))),e().getElementsByTagName("head")[0].appendChild(G);l.def(w,n,{ms_listener:1,getView:function(){return this.$22h.getView()},$26h:function(){var d=this;d.$36h&&z().removeChild(d.$36h),d.$23h=d.$24h=d.$25h=d.$35h=d.$36h=Z},handle_touchstart:function(d){for(var n,e,j=this,w=j.$22h,z=d.target,o=w.sm(),m=w.dm(),G="palette-header",W="palette-item",k=!1,s=!1,b=!1;z&&(z[i]||"").indexOf(G)<0&&(z[i]||"").indexOf(W)<0;)z=z.parentNode;z&&0<=z[i].indexOf("palette-header-tool")?k=!0:z&&0<=z[i].indexOf(G)?b=!0:z&&0<=z[i].indexOf(W)&&(s=!0),l.isLeftButton(d)?j.$27h(d)?(j.$24h=l.getClientPoint(d),j.$25h=w.ty()):k?(l.preventDefault(d),n=z.parentNode.$11h,(k=(e=m.getDataById(n)).s("tools")[z.toolIndex]).action&&k.action.call(w)):b?(l.preventDefault(d),n=z.$11h,(e=m.getDataById(n)).isExpanded()?e.setExpanded(!1):e.setExpanded(!0)):s?(n=z.$11h,k=m.getDataById(n),o.ss(k),w.handleDragAndDrop&&(l.preventDefault(d),k.s("draggable")&&(w.handleDragAndDrop(d,"prepare"),j.$35h=0)),k.s("draggable")||(l.preventDefault(d),j.$24h=l.getClientPoint(d),j.$25h=w.ty())):(l.preventDefault(d),j.$24h=l.getClientPoint(d),j.$25h=w.ty()):j.$26h(d)},handle_mousedown:function(d){this.handle_touchstart(d)},handle_mousewheel:function(d){this.handleScroll(d,d.wheelDelta/40,d.wheelDelta!==d.wheelDeltaX)},handle_DOMMouseScroll:function(d){this.handleScroll(d,-d.detail,1)},handleScroll:function(d,n,e){var j=this.$22h;l.preventDefault(d),e&&j._41o()&&j.ty(j.ty()+20*n)},handle_mouseup:function(d){this.handle_touchend(d)},handle_touchend:function(d){this.$37h(d),this.$26h(d)},handleWindowMouseUp:function(d){this.handleWindowTouchEnd(d)},handleWindowTouchEnd:function(d){this.$37h(d),this.$26h(d)},$37h:function(d){var n=this.$22h;2===this.$35h&&(this.$35h=3,n.handleDragAndDrop(d,"end"))},handleWindowMouseMove:function(d){this.handleWindowTouchMove(d)},handleWindowTouchMove:function(d){var n=this,e=n.$22h,j=n.$23h,w=n.$24h,z=n.$25h,o=l.getClientPoint(d),m=e._29I,G=n.$36h;1===n.$35h||2===n.$35h?(n.$35h=2,e.handleDragAndDrop(d,"between"),W(d)&&(d=d.touches[0]||d.changedTouches[0]),G.style.left=d.pageX-parseInt(G.width)/2+p,G.style.top=d.pageY-parseInt(G.height)/2+p):"p"===j?e.ty(z+o.y-w.y):"v"===j&&e.ty(z+(w.y-o.y)/m.height*e._59I)},handle_mousemove:function(d){this.handle_touchmove(d)},handle_touchmove:function(d){var n,e,j,w;!l.isDragging()&&l.isLeftButton(d)&&(j=(e=this).$22h,n=e.$27h(d),e.$24h?e.$23h||l.getDistance(l.getClientPoint(d),e.$24h)<2||(e.$23h=n?"v":"p",l.startDragging(e,d)):n?j._43o():0===e.$35h&&(e.$35h=1,j.handleDragAndDrop(d,"begin"),l.startDragging(e,d),W(d)&&(d=d.touches[0]||d.changedTouches[0]),n=e.$36h=new Image,e=j.$10h[j.sm().ld().getId()].querySelector(".image-box"),j=parseInt(e.style.width),w=parseInt(e.style.height),n.draggable=!1,n.src=e.toDataURL(),n.width=j,n.height=w,n.style.position="absolute",n.style.left=d.pageX-j/2+p,n.style.top=d.pageY-w/2+p,z().appendChild(n)))},$27h:function(d){var n=this.$22h,e=n.getView(),j=e.getBoundingClientRect(),w=n._29I,d=d.clientX-j.left+e.scrollLeft;return n._41o()&&w.x+w.width-d<k}}),ht.widget.Palette=function(d){var n,e=this,j=e._view=h.createView(null,e);e.$9h={},e.$10h={},e.$4h={},e._29I={x:0,y:0,width:0,height:0},e._59I=0,e.dm(d||new ht.DataModel),j[i]="ht-widget-palette",e.$29h=new w(e),M(j,K,l.paletteContentBackground),M(j,x,"auto"),M(j,U,J),M(j,"-moz-"+U,J),M(j,"-webkit-"+o,L),M(j,"-moz-"+o,L),M(j,"-ms-"+o,L),M(j,o,L),M(j,"position","absolute"),M(j,"overflow","hidden"),H(j,e._79O=(d=s(),(n=d.style).msTouchAction=L,n.cursor="default",m&&n.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",Z),n.position="absolute",n.left=u,n.top=u,d)),R(j,"dragstart",function(d){d.dataTransfer&&(d.dataTransfer.setData("Text","nodeid:"+d.target.$11h),d.dataTransfer.effectAllowed="all",e.$29h.$26h())})},j="Palette",d={ms_v:1,ms_fire:1,ms_dm:1,ms_sm:1,ms_vs:1,ms_bnb:1,ms_ac:["itemImageWidth","itemImageHeight","itemImagePadding","itemMargin","layout","autoHideScrollBar","scrollBarSize","scrollBarColor"],$30h:0,_itemImagePadding:4,_itemImageWidth:70,_itemImageHeight:50,_itemMargin:10,_layout:"largeicons",_autoHideScrollBar:l.autoHideScrollBar,_scrollBarSize:l.scrollBarSize,_scrollBarColor:l.scrollBarColor,getViewRect:function(){return this._29I},ty:function(d){if(d==Z)return this.getTranslateY();this.setTranslateY(d)},setTranslateY:function(d){var n;this.$32h==Z&&(d=this.$33h(d),n=this.$30h,this.$30h=d,this.fp("translateY",n,d))},getTranslateY:function(){return this.$30h},setLayout:function(d){var n,e,j=this,w=j._layout;"smallicons"===(j._layout=d)?n=e=20:"iconsonly"===d?n=e=50:(n=70,e=50),j.setItemImageWidth(n),j.setItemImageHeight(e),j.setItemImagePadding(4),j.fp("layout",w,d)},getDataAt:function(d){for(var n=d.target;n&&n.$11h==Z;)n=n.parentNode;if(n&&n.$11h!=Z)return this.getDataModel().getDataById(n.$11h)},$20h:function(){var d=16;return m&&(d*=1.2),d},$19h:function(){return l.paletteTitleHeight},$18h:function(){var d=l.paletteSeparatorWidth,n=l.paletteTitleBackground,n=l.paletteSeparatorColor||l.brighter(n);return d+p+" solid "+n},$17h:function(d){M(d,"cursor","pointer"),M(d,"display","inline-block"),M(d,"margin-right",(m?8:4)+p),M(d,"vertical-align",S)},$1h:function(d){var n=this,e=s(),j=s(),w=_("span"),z=(e[i]="palette-header",M(e,"position","relative"),M(e,K,l.paletteTitleBackground),M(e,"color",l.paletteTitleLabelColor),M(e,S,u),M(e,U,J),M(e,"-moz-"+U,J),M(e,"padding","0 5px 0 0"),M(e,"border-top",n.$18h()),M(e,"width","100%"),M(e,"cursor","pointer"),M(e,"white-space","nowrap"),M(e,x,"hidden"),M(e,N,l.paletteTitleLabelFont),M(e,"line-height",n.$19h()+p),e.$11h=d.getId(),b()),o=n.$19h(),m=n.$20h(),G=(n.$17h(z),h.setCanvas(z,m,o),H(e,z),d.s("tools"));if(G)for(var W=0;W<G.length;W++){var k=b();n.$17h(k),h.setCanvas(k,m,o),k[i]="palette-header-tool palette-header-tool"+d.getId()+"-"+W,k.style.position="absolute",k.style.right=(m+10)*W+"px",k.toolIndex=W,H(e,k)}return z[i]="palette-toggle-icon-"+d.getId(),j[i]="palette-content",M(j,"max-height",0+p),M(j,N,l.paletteContentLabelFont),M(j,x,"hidden"),j.$11h=d.getId(),n.$9h[d.getId()]=j,w[Y]=d.getName(),M(w,N,l.paletteTitleLabelFont),H(e,z),H(e,w),[e,j]},$2h:function(d){var n=this,e=n._layout,j=V&&d.s("draggable")?_("a"):s(),w=b(),z=s(),o=d.getName()||"",m=d.s("title")||d.getToolTip()||o,G=n._itemMargin,W=(w[i]="image-box",n.getItemImageWidth()),k=n.getItemImageHeight();return h.setCanvas(w,W,k),H(j,w),z[Y]=o,z[i]="label-box","iconsonly"!==e&&H(j,z),j[i]="palette-item",M(j,"vertical-align",S),M(j,"cursor","pointer"),M(j,"border-radius",5+p),M(j,"border","1px solid transparent"),M(j,"text-align","center"),M(j,"display","inline-block"),M(j,"margin-left",G+p),M(j,"margin-top",G+p),M(j,"color",l.paletteContentLabelColor),"smallicons"===e?(M(w,"vertical-align","middle"),M(j,"margin-left",2+p),M(j,"margin-top",2+p),M(j,"padding",2+p),M(j,"text-align","left"),M(z,"display","inline-block"),M(z,"min-width",n.$21h+n._itemMargin+p)):"largeicons"===e&&(M(z,"max-width",W+p),M(z,"overflow","hidden")),j.$11h=d.getId(),m&&(j.title=m),d.s("draggable")&&!n.handleDragAndDrop&&(V?(j.href="#",M(j,"text-decoration",L)):(j.draggable="true",M(j,"transform","translate(0,0)"),M(j,"z-index","0"))),j},$16h:function(d,n,e,j){d=h.initContext(d),h.translateAndScale(d,0,0,1),d.clearRect(0,0,e,e),e=(e-j)/2;l.drawStretchImage(d,l.getImage(n),"fill",0,e,j,j),d.restore()},$15h:function(d){var n,e,j=d.getId(),j=this._view.querySelector(".palette-toggle-icon-"+j),d=d.isExpanded()?l.paletteCollapseIcon:l.paletteExpandIcon;j&&d&&(n=this.$19h(),e=this.$20h(),this.$16h(j,d,n,e))},_drawToolsIcon:function(d){var n=d.s("tools");if(n)for(var e=0;e<n.length;e++){var j=this._view.querySelector(".palette-header-tool"+d.getId()+"-"+e),w=n[e].icon,z=this.$19h(),o=this.$20h();this.$16h(j,w,z,o)}},$14h:function(d){var n,e,j,w=this,z=d.getId(),z=w.$10h[z].querySelector(".image-box"),o=d.getImage(),m=d.s("image.stretch");z&&o&&(z=h.initContext(z),n=w.getItemImagePadding(),n="smallicons"===w._layout?n/2:n,e=w.getItemImageWidth()-2*n,j=w.getItemImageHeight()-2*n,h.translateAndScale(z,0,0,1),z.clearRect(0,0,e,j),l.drawStretchImage(z,l.getImage(o),m,n,n,e,j,d,w,w.getBodyColor(d)),z.restore())},validateImpl:function(){var e=this,d=e.$9h,n=e._layout,j=e.$10h,w=e.$4h,z=e._view,o=e.dm();if(e.$13h&&(delete e.$13h,w={},o.each(function(d){w[d.getId()]=d})),"smallicons"===n)for(var m in w){var G=w[m];G instanceof X&&(G=G.getName()||"",G=l.getTextSize(l.paletteContentLabelFont,G).width,e.$21h!=Z&&e.$21h>G||(e.$21h=G))}for(m in w){var W,k,s,b,M,i,S,h,L,N=w[m];o.contains(N)?N instanceof ht.Group?(s=e.$1h(N),(M=j[N.getId()])&&(W=M.nextSibling,A(z,W),A(z,M)),M=o.getSiblings(N).indexOf(N),(k=z.children[2*M]||e._79O)&&k.parentNode?(z.insertBefore(s[0],k),z.insertBefore(W||s[1],k)):(z.appendChild(s[0]),z.appendChild(W||s[1])),j[N.getId()]=s[0],b=d[N.getId()]=W||s[1],k=N.$12h,s=N.s("promptText"),k||(N.$12h=_("div"),N.$12h[Y]=s||"",k=N.$12h),0===N.getChildren().size()?b.contains(k)||H(b,k):b.contains(k)&&A(b,k)):(i=N.getParent())&&(s=e.$2h(N),S=j[N.getId()],b=d[i.getId()],S&&A(S.parentNode,S),M=o.getSiblings(N).indexOf(N),(S=b.children[M])?b.insertBefore(s,S):H(b,s),j[N.getId()]=s,e.$14h(N)):(h=(S=j[N.getId()]).parentNode,N instanceof ht.Group?(L=S.nextSibling,A(z,S),A(z,L),delete d[N.getId()]):(A(h,S),0===h.children.length&&(i=o.getDataById(h.$11h))&&(k=i.$12h)&&!h.contains(k)&&H(h,k)),delete j[N.getId()])}e.$4h={};function K(){var d=e._59I,n=0;e.$32h!=Z&&(clearInterval(e.$32h),n=0,delete e.$32h),e.$32h=setInterval(function(){e.$31h(),d===e._59I?2<=++n&&(clearInterval(e.$32h),delete e.$32h):(n=0,d=e._59I)},30)}var J,U;for(J in d)b=d[J],N=o.getDataById(d[J].$11h),e.$15h(N),e._drawToolsIcon(N),N.isExpanded()?(b.style.maxHeight===0+p?(U=b.scrollHeight+e._itemMargin+p,a(b).duration(200).set(c,U).set("padding-bottom",e._itemMargin+p).end(function(){K()})):b.style.maxHeight=b.scrollHeight+p,b.style.paddingBottom=e._itemMargin+p):b.style.maxHeight!==0+p&&a(b).duration(200).set(c,u).set("padding-bottom",u).end(function(){K()});e.$28h(),e.$31h()},$31h:function(){for(var d=this,n=d._view,e=0,j=n.children,w=0;w<j.length;w++){var z=j[w];z.className&&0<=z.className.indexOf("palette-")&&(e+=z.offsetHeight)}d._59I=e,d.$30h=d.$33h(d.ty());var o=d.ty();n.scrollTop=-o,d._29I={x:0,y:-o,width:n.clientWidth,height:n.clientHeight},M(d._79O,S,-o+p),d._93I()},$33h:function(d){var n=this._29I.height-this._59I;return 0<(d=d<n?n:d)?0:Math.round(d)},redraw:function(){this.$13h||(this.$13h=1,this.iv())},onPropertyChanged:function(d){["autoHideScrollBar","scrollBarSize","scrollBarColor","translateY"].indexOf(d.property)<0&&this.redraw(),"translateY"===d.property&&(this.iv(),this._43o())},findDataByName:function(d){for(var n=this.dm().getDatas(),e=0;e<n.size();e++){var j=n.get(e);if(j.getName()===d)return j}},setDataModel:function(d){var n=this,e=n._dataModel,j=n._selectionModel;e!==d&&(e&&(e.umm(n.$6h,n),e.umd(n.$8h,n),e.umh(n.$7h,n),j||e.sm().ums(n.$28h,n)),(n._dataModel=d).mm(n.$6h,n),d.md(n.$8h,n),d.mh(n.$7h,n),j?j._21I(d):d.sm().ms(n.$28h,n),n.sm().setSelectionMode("single"),n.fp("dataModel",e,d))},$6h:function(d){var n=this,e=n._view,j=d.data,w=n.$4h;"add"===d.kind||"remove"===d.kind?w[j.getId()]=j:"clear"===d.kind&&(n.$10h={},n.$9h={},n.$4h={},e[Y]=""),n.iv()},$7h:function(d){d=d.data;this.$4h[d.getId()]=d,this.iv()},$8h:function(d){var n=d.data;"expanded"!==d.property&&(this.$4h[n.getId()]=n),this.iv()},$28h:function(){var n,e=this,d=e.sm(),j=d.ld();this.dm().each(function(d){(n=e.$10h[d.getId()])&&0<=n[i].indexOf("palette-item")&&(d===j?M(n,K,l.paletteItemSelectBackground):n.style.removeProperty(K))})}},l.def(ht.widget[j],n,d)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);