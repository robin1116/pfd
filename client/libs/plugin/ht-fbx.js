!function(e,EU,K){"use strict";var F,Y=e.ht,M=Y.Default,Z=M.getInternal(),_=(M.clone,M.def),u=(Y.WebGLVarants,Y.Math.Matrix4),I=Y.Math.Vector4,p=Y.Math.Euler,w=Y.Math.Quaternion,C=Y.Math.Vector3;function x(_){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(_);for(var l="",q=0,i=_.length;q<i;q++)l+=String.fromCharCode(_[q]);try{return decodeURIComponent(escape(l))}catch(_){return l}}function B(_,l,q){return l===K&&(l=0),q===K&&(q=_.byteLength),x(new Uint8Array(_,l,q))}function b(_){return _/46186158e3}function k(_){return _*Math.PI/180}var V=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];function j(_){return 6<=(_=_||0)?V[0]:V[_]}function L(_,l,q){(l=l[q])!==K&&(_[q]=l)}function N(_,l){if(i="Kaydara FBX Binary  \0",(T=_).byteLength>=i.length&&i===B(T,0,i.length))F=(new r)._zS(_);else{T=B(_);if(!function(q){var _=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],i=0;for(var l=0;l<_.length;++l)if(function(_){var l=q[_-1];return q=q.slice(i+_),i++,l}(1)===_[l])return;return 1}(T))throw new Error("Unknown format.");if(z(T)<7e3)throw new Error("FBX version not supported, FileVersion: "+z(T));F=(new $)._zS(T)}var x,q,i=(new l6)._zS(l),e={model3d:!0},T=((_=i.externalAssetURIs)&&(e.externalAssetURIs=_),i.materialMap),W=(T&&(x=e.matDef={},T.forEach(function(_){var l,q=_.name,i=x[q]={};for(l in _)"name"!==l&&"setValues"!==l&&(i[l]=_[l])})),g(e,i,l,{}),{}),y={},E=!1,d=(M.traverse(e,null,function(_){if(W[_.name]){for(_.displayName=_.name;q=_.name+"_"+Y.Math.generateIncreasingID(),W[q];);_.name=q}W[_.name]=_.ID,y[_.ID]=_.name,delete _.ID,"__undefined__"===_.mat&&(E=!0)},"comps"),E&&(e.matDef||(e.matDef={}),e.matDef.__undefined__||(e.matDef.__undefined__={type:(new o).type})),e.animations&&e.animations.forEach(function(_){_.tracks.forEach(function(_){var l=_.name.split(".");l[0]&&y[l[0]]&&(_.name=y[l[0]]+"."+l.slice(1).join("."))})}),M.traverse(e,null,function(_){var l=_.skeleton;if(l){for(var q=l[0],i=q.length,x=new Array(i),e=0;e<i;e++)x[e]=q[e].name;_.skeleton={bones:x,boneMatrixInverses:l[1],bindMatrix:l[2].toArray(),bindMatrixInverse:(new u).copy(l[2]).invert().toArray()}}},"comps"),M.traverse(e,null,function(_){var l=_.comps;if(l)for(var q=l.length-1;0<=q;q--){var i=l[q];i.mesh||i.isBone||i.comps&&i.comps.length||l.splice(q,1)}},"comps"),Z.completeCubeCenterOfModel3d(e,{scene:i,cube:l.cube,center:l.center,rotationMode:l.rotationMode,t3:l.t3,r3:l.r3,s3:l.s3}),!1!==l.flipY&&M.traverse(e,function(_){_=_.mesh;if(_&&(_.uv||_.uv2)){for(var l=1,q=_.uv,i=q?q.length:0;l<i;l+=2)q[l]=1-q[l];for(l=1,i=(q=_.uv2)?q.length:0;l<i;l+=2)q[l]=1-q[l]}},null,"comps"),l.matDef);if(d)if(e.matDef)for(var I in d)e.matDef[I]=d[I];else e.matDef=d;return l.shape3d&&M.setShape3dModel(l.shape3d,e),l.playAutomatically&&(e.playAutomatically=!0),!l.ignoreNormal&&l.mikktTangent&&Y.Math.MikktSpaceAlgorithm&&Y.Math.MikktSpaceAlgorithm.generateMikktTangents(e,l.tangentFlipW),e}function O(){this.add=function(_,l){this[_]=l}}var q,i,T,v={position:"vs",normal:"ns"},S=new u,U=(q=new C,i=new w,T=new C,function(_,l){l.decompose(q,i,T),_.position=q.toArray(),_.quaternion=i.toArray(),_.scale=T.toArray()}),g=function(_,l,q,i){var x=l.mat;if(x)if(x instanceof Array){for(var e=[],T=0,W=x.length;T<W;T++)e.push(x[T].name);_.mat=e}else _.mat=x.name;var y=l.mesh;if(y){_.mesh=E={},y.index&&(E.is=y.index.array);var E,d,I=y.attributes;for(d in I){var F=v[d]||d;q.ignoreNormal&&"ns"===F||(E[F]=I[d].array)}var y=y.groups;y&&(_.subMeshes=y),_.mat||(_.mat="__undefined__")}!(_.mat&&_.mat instanceof Array&&_.mat.length)||_.subMeshes&&_.subMeshes.length||(delete _.subMeshes,_.mat=_.mat[0],console.warn("Unable to locate group boundaries in the sub-meshes. This may lead to incorrect rendering of this mesh.")),l.matrix.equals(S)||U(_,l.matrix),l.userData&&(y=l.userData.transformData)&&(y.rotationOffset||y.rotationPivot||y.scalingOffset||y.scalingPivot||2===y.inheritType)&&((Z=_.transformData={}).inheritType=y.inheritType||2,Z.translation=y.translation||[0,0,0],y.rotation?((M=y.rotation.map(k)).push(y.eulerOrder),Z.rotation=M):Z.rotation=[0,0,0,1],Z.scale=y.scale||[1,1,1],L(Z,y,"rotationOffset"),L(Z,y,"rotationPivot"),L(Z,y,"scalingOffset"),L(Z,y,"scalingPivot"));l.isBone&&(_.isBone=!0),_.name=l.name,_.ID=l.ID;var Y,M=l.skeleton,Z=(M&&(_.skeleton=M),l.animations),p=(Z&&(_.animations=Z),l.getChildren().getArray());if(p){_.comps=[];for(T=0,W=p.length;T<W;T++)_.comps.push(Y={}),g(Y,p[T],q,i)}},J=(Z.addMethod(M,{loadFbx:function(i,x){(x=x||{}).responseType="arraybuffer",M.xhrLoad(i,function(_){var l,q;_=_,l=x.finishFunc,q=x.shape3d,(_=_?N(_,x):null)?l&&l(_,i,q):l&&l(null)},x)},parseFbx:N}),new p),f=new C;function A(_){var l=new u,q=new u,i=new u,x=new u,e=new u,T=new u,W=new u,y=new u,E=new u,d=new u,I=new u,F=new u,Y=_.inheritType||0,M=(_.translation&&l.setPosition(f.fromArray(_.translation)),_.preRotation&&((M=_.preRotation.map(k)).push(_.eulerOrder),q.makeRotationFromEuler(J.fromArray(M))),_.rotation&&((M=_.rotation.map(k)).push(_.eulerOrder),i.makeRotationFromEuler(J.fromArray(M))),_.postRotation&&((M=_.postRotation.map(k)).push(_.eulerOrder),x.makeRotationFromEuler(J.fromArray(M)),x.invert()),_.scale&&e.scale(f.fromArray(_.scale)),_.scalingOffset&&W.setPosition(f.fromArray(_.scalingOffset)),_.scalingPivot&&T.setPosition(f.fromArray(_.scalingPivot)),_.rotationOffset&&y.setPosition(f.fromArray(_.rotationOffset)),_.rotationPivot&&E.setPosition(f.fromArray(_.rotationPivot)),_.parentMatrixWorld&&(I.copy(_.parentMatrix),d.copy(_.parentMatrixWorld)),q.clone().multiply(i).multiply(x)),_=new u,Z=(_.extractRotation(d),new u),Z=(Z.copyPosition(d),Z.clone().invert().multiply(d)),Z=_.clone().invert().multiply(Z),p=e,w=new u,Z=(0===Y?w.copy(_).multiply(M).multiply(Z).multiply(p):1===Y?w.copy(_).multiply(Z).multiply(M).multiply(p):(Y=(new u).scale((new C).setFromMatrixScale(I)).clone().invert(),I=Z.clone().multiply(Y),w.copy(_).multiply(M).multiply(I).multiply(p)),E.clone().invert()),Y=T.clone().invert(),_=l.clone().multiply(y).multiply(E).multiply(q).multiply(i).multiply(x).multiply(Z).multiply(W).multiply(T).multiply(e).multiply(Y),M=(new u).copyPosition(_),I=d.clone().multiply(M);return F.copyPosition(I),(_=F.clone().multiply(w)).premultiply(d.invert()),_}var Q=[];function H(_,l,q,i){var x;switch(i.mappingType){case"ByPolygonVertex":x=_;break;case"ByPolygon":x=l;break;case"ByVertice":x=q;break;case"AllSame":x=i.indices[0];break;default:console.warn("unknown attribute mapping type "+i.mappingType)}for(var e=(x="IndexToDirect"===i.referenceType?i.indices[x]:x)*i.dataSize,T=e+i.dataSize,W=Q,y=i.buffer,E=T,d=e,I=0;d<E;d++,I++)W[I]=y[d];return W}function t(_,l,q){return _.slice(0,l).concat(q).concat(_.slice(l))}var X=new RegExp("[\\[\\]\\.:\\/]","g");function d(_){return _.replace(/\s/g,"_").replace(X,"")}function z(_){_=_.match(/FBXVersion: (\d+)/);if(_)return parseInt(_[1]);throw new Error("Cannot find the version number for the file given.")}function h(_){return _.split(",").map(function(_){return parseFloat(_)})}function s(){this.userData={},this.matrix=new u,this.matrixWorld=new u,s.superClass.constructor.apply(this,arguments)}function D(_){for(var l in this.texture=!0,_)this[l]=_[l]}function W(_,l){this.mat=l,this.mesh=_,this.userData={},W.superClass.constructor.apply(this,arguments)}function c(_,l){this.dv=new DataView(_),this.offset=0,this.littleEndian=l===K||l,this.getOffset=function(){return this.offset},this.size=function(){return this.dv.buffer.byteLength},this.skip=function(_){this.offset+=_},this._hS=function(){return 1==(1&this.getUint8())},this._iS=function(_){for(var l=[],q=0;q<_;q++)l.push(this._hS());return l},this.getUint8=function(){var _=this.dv.getUint8(this.offset);return this.offset+=1,_},this.getInt16=function(){var _=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,_},this.getInt32=function(){var _=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,_},this.getInt32Array=function(_){for(var l=[],q=0;q<_;q++)l.push(this.getInt32());return l},this.getUint32=function(){var _=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,_},this.getInt64=function(){var _,l;return this.littleEndian?(_=this.getUint32(),l=this.getUint32()):(l=this.getUint32(),_=this.getUint32()),2147483648&l?(l=4294967295&~l,-(4294967296*(l=4294967295===(_=4294967295&~_)?l+1&4294967295:l)+(_=_+1&4294967295))):4294967296*l+_},this.getInt64Array=function(_){for(var l=[],q=0;q<_;q++)l.push(this.getInt64());return l},this.getUint64=function(){var _,l;return this.littleEndian?(_=this.getUint32(),l=this.getUint32()):(l=this.getUint32(),_=this.getUint32()),4294967296*l+_},this.getFloat32=function(){var _=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,_},this.getFloat32Array=function(_){for(var l=[],q=0;q<_;q++)l.push(this.getFloat32());return l},this.getFloat64=function(){var _=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,_},this.getFloat64Array=function(_){for(var l=[],q=0;q<_;q++)l.push(this.getFloat64());return l},this._vS=function(_){var l=this.dv.buffer.slice(this.offset,this.offset+_);return this.offset+=_,l},this.getString=function(_){for(var l=[],q=0;q<_;q++)l[q]=this.getUint8();var i=l.indexOf(0);return 0<=i&&(l=l.slice(0,i)),x(new Uint8Array(l))}}function R(){this.uuid=Y.Math.generateUUID(),this.name="",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null}_(s,Y.Data,{add:function(_){this.addChild(_)},traverse:function(_){M.traverse(this,_)},applyMatrix4:function(_){this.matrix.premultiply(_),this.getParent()?this.matrixWorld.multiplyMatrices(this.getParent().matrixWorld,this.matrix):this.matrixWorld.copy(this.matrix)}});var P,E,y,o=function(){this.type="pbr",this.setValues=function(_){if(_){for(var l in _)this[l]=_[l];return this}},this.clone=function(){var _,l=new o;for(_ in this)this[_]&&(l[_]=this[_]);return l}},$=(_(W,s,{normalizeSkinWeights:function(){var _=new Y.Math.Vector4,l=this.mesh.attributes.skinWeight;if(l)for(var q=0,i=l.count;q<i;q++){_.fromBufferAttribute(l,q);var x=1/_.manhattanLength();x!=1/0?_.multiplyScalar(x):_.set(1,0,0,0),l.setXYZW(q,_.x,_.y,_.z,_.w)}}}),function(){this._2S=function(){return this.nodeStack[this.currentIndent-2]},this._3S=function(){return this.nodeStack[this.currentIndent-1]},this._4S=function(){return this.currentProp},this._5S=function(_){this.nodeStack.push(_),this.currentIndent+=1},this._6S=function(){this.nodeStack.pop(),--this.currentIndent},this._7S=function(_,l){this.currentProp=_,this.currentPropName=l},this._zS=function(_){this.currentIndent=0,this.allNodes=new O,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var e=this,T=_.split(/[\r\n]+/);return T.forEach(function(_,l){var q,i=_.match(/^[\s\t]*;/),x=_.match(/^[\s\t]*$/);i||x||(i=_.match("^\\t{"+e.currentIndent+"}(\\w+):(.*){",""),x=_.match("^\\t{"+e.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),q=_.match("^\\t{"+(e.currentIndent-1)+"}}"),i?e._8S(_,i):x?e._aS(_,x,T[++l]):q?e._6S():_.match(/^[^\s\t}]/)&&e._bS(_))}),this.allNodes},this._8S=function(_,l){var q=l[1].trim().replace(/^"/,"").replace(/"$/,""),l=l[2].split(",").map(function(_){return _.trim().replace(/^"/,"").replace(/"$/,"")}),i={name:q},l=this._9S(l),x=this._3S();0===this.currentIndent?this.allNodes.add(q,i):q in x?("PoseNode"===q?x.PoseNode.push(i):x[q].id!==K&&(x[q]={},x[q][x[q].id]=x[q]),""!==l.id&&(x[q][l.id]=i)):"number"==typeof l.id?(x[q]={},x[q][l.id]=i):"Properties70"!==q&&(x[q]="PoseNode"===q?[i]:i),"number"==typeof l.id&&(i.id=l.id),""!==l.name&&(i.attrName=l.name),""!==l.type&&(i.attrType=l.type),this._5S(i)},this._9S=function(_){var l=_[0],q=(""!==_[0]&&(l=parseInt(_[0]),isNaN(l)&&(l=_[0])),""),i="";return 1<_.length&&(q=_[1].replace(/^(\w+)::/,""),i=_[2]),{id:l,name:q,type:i}},this._aS=function(_,l,q){var i=l[1].replace(/^"/,"").replace(/"$/,"").trim(),l=l[2].replace(/^"/,"").replace(/"$/,"").trim(),q=("Content"===i&&","===l&&(l=q.replace(/"/g,"").replace(/,$/,"").trim()),this._3S());if("Properties70"===q.name)this._cS(_,i,l);else{if("C"===i){for(var _=l.split(",").slice(1),x=parseInt(_[0]),_=parseInt(_[1]),e=(e=l.split(",").slice(3)).map(function(_){return _.trim().replace(/^"/,"")}),i="connections",T=l=[x,_],W=e,y=0,E=T.length,d=W.length;y<d;y++,E++)T[E]=W[y];q[i]===K&&(q[i]=[])}"Node"===i&&(q.id=l),i in q&&Array.isArray(q[i])?q[i].push(l):"a"!==i?q[i]=l:q.a=l,this._7S(q,i),"a"===i&&","!==l.slice(-1)&&(q.a=h(l))}},this._bS=function(_){var l=this._3S();l.a+=_,","!==_.slice(-1)&&(l.a=h(l.a))},this._cS=function(_,l,q){var q=q.split('",').map(function(_){return _.trim().replace(/^\"/,"").replace(/\s/,"_")}),i=q[0],x=q[1],e=q[2],T=q[3],W=q[4];switch(x){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":W=parseFloat(W);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":W=h(W)}this._2S()[i]={type:x,type2:e,flag:T,value:W},this._7S(this._2S(),i)}}),r=function(){this._zS=function(_){var l=new c(_),q=(l.skip(23),l.getUint32());if(q<6400)throw new Error("FBX version not supported : "+q);for(var i=new O;!this._dS(l);){var x=this._eS(l,q);null!==x&&i.add(x.name,x)}return i},this._dS=function(_){return _.size()%16==0?(_.getOffset()+160+16&-16)>=_.size():_.getOffset()+160+16>=_.size()},this._eS=function(_,l){var q={},i=7500<=l?_.getUint64():_.getUint32(),x=7500<=l?_.getUint64():_.getUint32(),e=(7500<=l?_.getUint64():_.getUint32(),_.getUint8()),T=_.getString(e);if(0===i)return null;for(var W=[],y=0;y<x;y++)W.push(this._gS(_));var e=0<W.length?W[0]:"",E=1<W.length?W[1]:"",d=2<W.length?W[2]:"";for(q.singleProperty=1===x&&_.getOffset()===i;i>_.getOffset();){var I=this._eS(_,l);null!==I&&this._fS(T,q,I)}return q.propertyList=W,"number"==typeof e&&(q.id=e),""!==E&&(q.attrName=E),""!==d&&(q.attrType=d),""!==T&&(q.name=T),q},this._fS=function(_,l,q){var i,x,e,T,W;!0===q.singleProperty?(x=q.propertyList[0],Array.isArray(x)?(l[q.name]=q).a=x:l[q.name]=x):"Connections"===_&&"C"===q.name?(i=[],q.propertyList.forEach(function(_,l){0!==l&&i.push(_)}),l.connections===K&&(l.connections=[]),l.connections.push(i)):"Properties70"===q.name?EU.keys(q).forEach(function(_){l[_]=q[_]}):"Properties70"===_&&"P"===q.name?(x=q.propertyList[0],_=q.propertyList[1],e=q.propertyList[2],T=q.propertyList[3],0===x.indexOf("Lcl ")&&(x=x.replace("Lcl ","Lcl_")),W="Color"===(_=0===_.indexOf("Lcl ")?_.replace("Lcl ","Lcl_"):_)||"ColorRGB"===_||"Vector"===_||"Vector3D"===_||0===_.indexOf("Lcl_")?[q.propertyList[4],q.propertyList[5],q.propertyList[6]]:q.propertyList[4],l[x]={type:_,type2:e,flag:T,value:W}):l[q.name]===K?"number"==typeof q.id?(l[q.name]={},l[q.name][q.id]=q):l[q.name]=q:"PoseNode"===q.name?(Array.isArray(l[q.name])||(l[q.name]=[l[q.name]]),l[q.name].push(q)):l[q.name][q.id]===K&&(l[q.name][q.id]=q)},this._gS=function(_){var l=_.getString(1);switch(l){case"C":return _._hS();case"D":return _.getFloat64();case"F":return _.getFloat32();case"I":return _.getInt32();case"L":return _.getInt64();case"R":return i=_.getUint32(),_._vS(i);case"S":return i=_.getUint32(),_.getString(i);case"Y":return _.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var q=_.getUint32(),i=_.getUint32(),x=_.getUint32();if(0===i)switch(l){case"b":case"c":return _._iS(q);case"d":return _.getFloat64Array(q);case"f":return _.getFloat32Array(q);case"i":return _.getInt32Array(q);case"l":return _.getInt64Array(q)}void 0===_6&&console.error("Require External library fflate.min.js.");var i=_6.unzlibSync(new Uint8Array(_._vS(x))),e=new c(i.buffer);switch(l){case"b":case"c":return e._iS(q);case"d":return e.getFloat64Array(q);case"f":return e.getFloat32Array(q);case"i":return e.getInt32Array(q);case"l":return e.getInt64Array(q)}default:throw new Error("Unknown property type "+l)}}},_6=function(){function Y(_,l){for(var q=new Q(31),i=0;i<31;++i)q[i]=l+=1<<_[i-1];var x=new t(q[30]);for(i=1;i<30;++i)for(var e=q[i];e<q[i+1];++e)x[e]=e-q[i]<<5|i;return[q,x]}var _={},M=("undefined"!=typeof module&&"object"==typeof exports?function(_){var W;try{W=require("worker_threads").Worker}catch(W){}return exports.default=W?function(_,l,q,i,x){var e=!1,T=new W(_+";var __w=require('worker_threads');__w.parentPort.on('message',function(m){onmessage({data:m})}),postMessage=function(m,t){__w.parentPort.postMessage(m,t)},close=process.exit;self=global",{eval:!0}).on("error",function(_){return x(_,null)}).on("message",function(_){return x(null,_)}).on("exit",function(_){_&&!e&&x(Error("exited with code "+_),null)});return T._wS(q,i),T.terminate=function(){return e=!0,W.prototype.terminate.call(T)},T}:function(_,l,q,i,x){setImmediate(function(){return x(Error("async operations unsupported - update to Node 12+ (or Node 10-11 with the --experimental-worker CLI flag)"),null)});function e(){}return{terminate:e,_wS:e}},_}:function(_){var e={},T=function(_){return URL.createObjectURL(new Blob([_],{type:"text/javascript"}))},W=function(_){return new Worker(_)};try{URL.revokeObjectURL(T(""))}catch(e){T=function(_){return"data:application/javascript;charset=UTF-8,"+encodeURI(_)},W=function(_){return new Worker(_,{type:"module"})}}return _.default=function(_,l,q,i,x){l=W(e[l]||(e[l]=T(_)));return l._yS=function(_){return x(_.error,null)},l._xS=function(_){return x(null,_.data)},l._wS(q,i),l},_})({}),A=Uint8Array,Q=Uint16Array,t=Uint32Array,X=new A([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),z=new A([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),j=new A([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),l=Y(X,2),U=l[0],$=l[1];U[28]=258,$[258]=28;for(var l=Y(z,0),g=l[0],r=l[1],w=new Q(32768),q=0;q<32768;++q){var i=(43690&q)>>>1|(21845&q)<<1;w[q]=((65280&(i=(61680&(i=(52428&i)>>>2|(13107&i)<<2))>>>4|(3855&i)<<4))>>>8|(255&i)<<8)>>>1}for(var N=function(_,l,q){for(var i=_.length,x=0,e=new Q(l);x<i;++x)++e[_[x]-1];var T=new Q(l);for(x=0;x<l;++x)T[x]=T[x-1]+e[x-1]<<1;if(q){for(var W=new Q(1<<l),y=15-l,x=0;x<i;++x)if(_[x])for(var E=x<<4|_[x],d=l-_[x],I=T[_[x]-1]++<<d,F=I|(1<<d)-1;I<=F;++I)W[w[I]>>>y]=E}else for(W=new Q(i),x=0;x<i;++x)_[x]&&(W[x]=w[T[_[x]-1]++]>>>15-_[x]);return W},B=new A(288),q=0;q<144;++q)B[q]=8;for(q=144;q<256;++q)B[q]=9;for(q=256;q<280;++q)B[q]=7;for(q=280;q<288;++q)B[q]=8;var b=new A(32);for(q=0;q<32;++q)b[q]=5;function _6(_){for(var l=_[0],q=1;q<_.length;++q)_[q]>l&&(l=_[q]);return l}function O(_,l,q){var i=l/8|0;return(_[i]|_[1+i]<<8)>>(7&l)&q}function l6(_,l){var q=l/8|0;return(_[q]|_[1+q]<<8|_[2+q]<<16)>>(7&l)}function u(l,_,q,i,x,e){var T=l.length,W=new A(i+T+5*(1+Math.ceil(T/7e3))+x),y=W.subarray(i,W.length-x),E=0;if(!_||T<8)for(var d=0;d<=T;d+=65535){var I=d+65535;E=I<T?E6(y,E,l.subarray(d,I)):(y[d]=e,E6(y,E,l.subarray(d,T)))}else{for(var _=I6[_-1],b=_>>>13,V=8191&_,F=(1<<q)-1,Y=new Q(32768),M=new Q(1+F),Z=Math.ceil(q/3),j=2*Z,p=function(_){return(l[_]^l[_+1]<<Z^l[_+2]<<j)&F},w=new t(25e3),u=new Q(288),C=new Q(32),k=0,K=0,L=d=0,J=0,f=0;d<T;++d){var H=p(d),h=32767&d,s=M[H];if(Y[h]=s,M[H]=h,J<=d){var R=T-d;if((7e3<k||24576<L)&&423<R){E=d6(l,y,0,w,u,C,K,L,f,d-f,E),L=k=K=0,f=d;for(var P=0;P<286;++P)u[P]=0;for(P=0;P<30;++P)C[P]=0}var o=2,m=0,N=V,G=h-s&32767;if(2<R&&H==p(d-G))for(var O=Math.min(b,R)-1,v=Math.min(32767,d),S=Math.min(258,R);G<=v&&--N&&h!=s;){if(l[d+o]==l[d+o-G]){for(var a=0;a<S&&l[d+a]==l[d+a-G];++a);if(o<a){if(m=G,O<(o=a))break;var U=Math.min(G,a-2),n=0;for(P=0;P<U;++P){var B=d-G+P+32768&32767,g=B-Y[B]+32768&32767;n<g&&(n=g,s=B)}}}G+=(h=s)-(s=Y[h])+32768&32767}m?(w[L++]=268435456|$[o]<<18|r[m],H=31&$[o],R=31&r[m],K+=X[H]+z[R],++u[257+H],++C[R],J=d+o,++k):(w[L++]=l[d],++u[l[d]])}}E=d6(l,y,e,w,u,C,K,L,f,d-f,E),!e&&7&E&&(E=E6(y,E+1,c))}return D(W,0,i+T6(E)+x)}function x(){return[A,Q,t,X,z,j,U,g,i6,e6,w,N,_6,O,l6,T6,D,o,Z,T,P]}function e(){return[A,Q,t,X,z,j,$,r,q6,B,x6,b,w,I6,c,N,V,v,W6,m,y6,S,E6,d6,T6,D,u,d,h6,T]}function C(){return[w6,k6,p,H,G]}function L(){return[u6,C6]}function J(){return[K6,p,a]}function f(){return[L6]}function T(_){return postMessage(_,[_.buffer])}function P(_){return _&&_.size&&new A(_.size)}function W(_,l,q,i,x,e){var T=Z6(q,i,x,function(_,l){T.terminate(),e(_,l)});return T._wS([_,l],l.consume?[_.buffer]:[]),function(){T.terminate()}}function y(l){return l.ondata=function(_,l){return postMessage([_,l],[_.buffer])},function(_){return l.push(_.data[0],_.data[1])}}function E(_,q,l,i,x){var e,T=Z6(_,i,x,function(_,l){_?(T.terminate(),q.ondata.call(q,_)):(l[1]&&T.terminate(),q.ondata.call(q,_,l[0],l[1]))});T._wS(l),q.push=function(_,l){if(e)throw"stream finished";if(!q.ondata)throw"no stream handler";T._wS([_,e=l],[_.buffer])},q.terminate=function(){T.terminate()}}var q6=N(B,9,0),i6=N(B,9,1),x6=N(b,5,0),e6=N(b,5,1),T6=function(_){return(_/8|0)+(7&_&&1)},D=function(_,l,q){(null==l||l<0)&&(l=0),(null==q||q>_.length)&&(q=_.length);var i=new(_ instanceof Q?Q:_ instanceof t?t:A)(q-l);return i.set(_.subarray(l,q)),i},o=function(_,q,l){var i=_.length;if(!i||l&&!l.l&&i<5)return q||new A(0);function x(_){var l=q.length;l<_&&((l=new A(Math.max(2*l,_))).set(q),q=l)}var e=!q||l,T=!l||l.i,W=(l=l||{},q=q||new A(3*i),l.f||0),y=l.p||0,E=l.b||0,d=l.l,I=l.d,F=l.m,Y=l.n,M=8*i;do{if(!d){l.f=W=O(_,y,1);var Z=O(_,y+1,3);if(y+=3,!Z){var p=_[(H=T6(y)+4)-4]|_[H-3]<<8,w=H+p;if(i<w){if(T)throw"unexpected EOF";break}e&&x(E+p),q.set(_.subarray(H,w),E),l.b=E+=p,l.p=y=8*w;continue}if(1==Z)d=i6,I=e6,F=9,Y=5;else{if(2!=Z)throw"invalid block type";var p=O(_,y,31)+257,u=O(_,y+10,15)+4,C=p+O(_,y+5,31)+1;y+=14;for(var k=new A(C),K=new A(19),L=0;L<u;++L)K[j[L]]=O(_,y+3*L,7);y+=3*u;for(var w=_6(K),J=(1<<w)-1,f=N(K,w,1),L=0;L<C;){var H,h=f[O(_,y,J)];if(y+=15&h,(H=h>>>4)<16)k[L++]=H;else{var s=0,R=0;for(16==H?(R=3+O(_,y,3),y+=2,s=k[L-1]):17==H?(R=3+O(_,y,7),y+=3):18==H&&(R=11+O(_,y,127),y+=7);R--;)k[L++]=s}}var Z=k.subarray(0,p),P=k.subarray(p),F=_6(Z),Y=_6(P),d=N(Z,F,1),I=N(P,Y,1)}if(M<y){if(T)throw"unexpected EOF";break}}e&&x(E+131072);for(var b=(1<<F)-1,V=(1<<Y)-1,o=y;;o=y){var m=(s=d[l6(_,y)&b])>>>4;if((y+=15&s)>M){if(T)throw"unexpected EOF";break}if(!s)throw"invalid length/literal";if(m<256)q[E++]=m;else{if(256==m){o=y,d=null;break}var G,a=m-254,m=(264<m&&(a=O(_,y,(1<<(G=X[L=m-257]))-1)+U[L],y+=G),I[l6(_,y)&V]),n=m>>>4;if(!m)throw"invalid distance";if(y+=15&m,P=g[n],3<n&&(G=z[n],P+=l6(_,y)&(1<<G)-1,y+=G),M<y){if(T)throw"unexpected EOF";break}e&&x(E+131072);for(var B=E+a;E<B;E+=4)q[E]=q[E-P],q[E+1]=q[E+1-P],q[E+2]=q[E+2-P],q[E+3]=q[E+3-P];E=B}}l.l=d,l.p=o,l.b=E,d&&(W=1,l.m=F,l.d=I,l.n=Y)}while(!W);return E==q.length?q:D(q,0,E)},V=function(_,l,q){var i=l/8|0;_[i]|=q<<=7&l,_[1+i]|=q>>>8},v=function(_,l,q){var i=l/8|0;_[i]|=q<<=7&l,_[1+i]|=q>>>8,_[2+i]|=q>>>16},W6=function(_,l){for(var q=[],i=0;i<_.length;++i)_[i]&&q.push({s:i,f:_[i]});var x=q.length,e=q.slice();if(!x)return[c,0];if(1==x)return(Z=new A(q[0].s+1))[q[0].s]=1,[Z,1];q.sort(function(_,l){return _.f-l.f}),q.push({s:-1,f:25001});var T=q[0],W=q[1],y=0,E=1,d=2;for(q[0]={s:-1,f:T.f+W.f,l:T,r:W};E!=x-1;)T=q[q[y].f<q[d].f?y++:d++],W=q[y!=E&&q[y].f<q[d].f?y++:d++],q[E++]={s:-1,f:T.f+W.f,l:T,r:W};var I=e[0].s;for(i=1;i<x;++i)e[i].s>I&&(I=e[i].s);var F=new Q(I+1),Y=m(q[E-1],F,0);if(l<Y){var i=0,M=0,Z=Y-l,p=1<<Z;for(e.sort(function(_,l){return F[l.s]-F[_.s]||_.f-l.f});i<x;++i){var w=e[i].s;if(!(F[w]>l))break;M+=p-(1<<Y-F[w]),F[w]=l}for(M>>>=Z;0<M;){var u=e[i].s;F[u]<l?M-=1<<l-F[u]++-1:++i}for(;0<=i&&M;--i){var C=e[i].s;F[C]==l&&(--F[C],++M)}Y=l}return[new A(F),Y]},m=function(_,l,q){return-1==_.s?Math.max(m(_.l,l,q+1),m(_.r,l,q+1)):l[_.s]=q},y6=function(_){for(var l=_.length;l&&!_[--l];);for(var q=new Q(++l),i=0,x=_[0],e=1,T=function(_){q[i++]=_},W=1;W<=l;++W)if(_[W]==x&&W!=l)++e;else{if(!x&&2<e){for(;138<e;e-=138)T(32754);2<e&&(T(10<e?e-11<<5|28690:e-3<<5|12305),e=0)}else if(3<e){for(T(x),--e;6<e;e-=6)T(8304);2<e&&(T(e-3<<5|8208),e=0)}for(;e--;)T(x);e=1,x=_[W]}return[q.subarray(0,i),l]},S=function(_,l){for(var q=0,i=0;i<l.length;++i)q+=_[i]*l[i];return q},E6=function(_,l,q){var i=q.length,x=T6(l+2);_[x]=255&i,_[x+1]=i>>>8,_[x+2]=255^_[x],_[x+3]=255^_[x+1];for(var e=0;e<i;++e)_[x+e+4]=q[e];return 8*(x+4+i)},d6=function(_,l,q,i,x,e,T,W,y,E,d){V(l,d++,q),++x[256];for(var q=W6(x,15),I=q[0],q=q[1],F=W6(e,15),Y=F[0],F=F[1],M=y6(I),Z=M[0],M=M[1],p=y6(Y),w=p[0],p=p[1],u=new Q(19),C=0;C<Z.length;++C)u[31&Z[C]]++;for(C=0;C<w.length;++C)u[31&w[C]]++;for(var k=W6(u,7),K=k[0],k=k[1],L=19;4<L&&!K[j[L-1]];--L);var J,f,H=E+5<<3,h=S(x,B)+S(e,b)+T,x=S(x,I)+S(e,Y)+T+14+3*L+S(u,K)+(2*u[16]+3*u[17]+7*u[18]);if(H<=h&&H<=x)return E6(l,d,_.subarray(y,y+E));if(V(l,d,1+(x<h)),d+=2,x<h){var s=N(I,q,0),R=I,P=N(Y,F,0),o=Y,m=N(K,k,0);for(V(l,d,M-257),V(l,d+5,p-1),V(l,d+10,L-4),d+=14,C=0;C<L;++C)V(l,d+3*C,K[j[C]]);d+=3*L;for(var G=[Z,w],a=0;a<2;++a)for(var n=G[a],C=0;C<n.length;++C)V(l,d,m[J=31&n[C]]),d+=K[J],15<J&&(V(l,d,n[C]>>>5&127),d+=n[C]>>>12)}else s=q6,R=B,P=x6,o=b;for(C=0;C<W;++C)255<i[C]?(v(l,d,s[257+(J=i[C]>>>18&31)]),d+=R[J+257],7<J&&(V(l,d,i[C]>>>23&31),d+=X[J]),f=31&i[C],v(l,d,P[f]),d+=o[f],3<f&&(v(l,d,i[C]>>>5&8191),d+=z[f])):(v(l,d,s[i[C]]),d+=R[i[C]]);return v(l,d,s[256]),d+R[256]},I6=new t([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),c=new A(0),G=function(){for(var _=new t(256),l=0;l<256;++l){for(var q=l,i=9;--i;)q=(1&q&&3988292384)^q>>>1;_[l]=q}return _}(),H=function(){var i=-1;return{p:function(_){for(var l=i,q=0;q<_.length;++q)l=G[255&l^_[q]]^l>>>8;i=l},d:function(){return~i}}},a=function(){var T=1,W=0;return{p:function(_){for(var l=T,q=W,i=_.length,x=0;x!=i;){for(var e=Math.min(x+2655,i);x<e;++x)q+=l+=_[x];l=(65535&l)+15*(l>>16),q=(65535&q)+15*(q>>16)}T=l,W=q},d:function(){return(255&(T%=65521))<<24|T>>>8<<16|(255&(W%=65521))<<8|W>>>8}}},d=function(_,l,q,i,x){return u(_,null==l.level?6:l.level,null==l.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(_.length)))):12+l.mem,q,i,!x)},n=function(_,l){var q,i={};for(q in _)i[q]=_[q];for(q in l)i[q]=l[q];return i},F6=function(_,l,q){for(var i=_(),_=""+_,x=_.slice(_.indexOf("[")+1,_.lastIndexOf("]")).replace(/ /g,"").split(","),e=0;e<i.length;++e){var T=i[e],W=x[e];if("function"==typeof T){l+=";"+W+"=";var y=""+T;if(T.prototype)if(-1!=y.indexOf("[native code]")){var E=y.indexOf(" ",8)+1;l+=y.slice(E,y.indexOf("(",E))}else for(var d in l+=y,T.prototype)l+=";"+W+".prototype."+d+"="+T.prototype[d];else l+=y}else q[W]=T}return[l,q]},Y6=[],M6=function(_){var l,q=[];for(l in _)(_[l]instanceof A||_[l]instanceof Q||_[l]instanceof t)&&q.push((_[l]=new _[l].varructor(_[l])).buffer);return q},Z6=function(_,l,q,i){var x;if(!Y6[q]){for(var e="",T={},W=_.length-1,y=0;y<W;++y)e=(x=F6(_[y],e,T))[0],T=x[1];Y6[q]=F6(_[W],e,T)}var E=n({},Y6[q][1]);return M.default(Y6[q][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+l+"}",q,E,M6(E),i)},k=function(_,l){return _[l]|_[l+1]<<8},K=function(_,l){return(_[l]|_[l+1]<<8|_[l+2]<<16|_[l+3]<<24)>>>0},p6=function(_,l){return K(_,l)+4294967296*K(_,l+4)},p=function(_,l,q){for(;q;++l)_[l]=q,q>>>=8},w6=function(_,l){var q=l.filename;if(_[0]=31,_[1]=139,_[2]=8,_[8]=l.level<2?4:9==l.level?2:0,_[9]=3,0!=l.mtime&&p(_,4,Math.floor(new Date(l.mtime||Date.now())/1e3)),q){_[3]=8;for(var i=0;i<=q.length;++i)_[i+10]=q.charCodeAt(i)}},u6=function(_){if(31!=_[0]||139!=_[1]||8!=_[2])throw"invalid gzip data";var l=_[3],q=10;4&l&&(q+=_[10]|2+(_[11]<<8));for(var i=(l>>3&1)+(l>>4&1);0<i;i-=!_[q++]);return q+(2&l)},C6=function(_){var l=_.length;return(_[l-4]|_[l-3]<<8|_[l-2]<<16|_[l-1]<<24)>>>0},k6=function(_){return 10+(_.filename&&_.filename.length+1||0)},K6=function(_,l){l=l.level,l=0==l?0:l<6?1:9==l?3:2;_[0]=120,_[1]=l<<6|(l?32-2*l:1)},L6=function(_){if(8!=(15&_[0])||7<_[0]>>>4||(_[0]<<8|_[1])%31)throw"invalid zlib data";if(32&_[1])throw"invalid zlib data: preset dictionaries not supported"};function J6(_,l){return l||"function"!=typeof _||(l=_,_={}),this.ondata=l,_}var I=function(){function _(_,l){l||"function"!=typeof _||(l=_,_={}),this.ondata=l,this.o=_||{}}return _.prototype.p=function(_,l){this.ondata(d(_,this.o,0,0,!l),l)},_.prototype.push=function(_,l){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=l,this.p(_,l||!1)},_}(),f6=(_.Deflate=I,function(_,l){E([e,function(){return[y,I]}],this,J6.call(this,_,l),function(_){_=new I(_.data);onmessage=y(_)},6)});function H6(_,l,q){if(q||(q=l,l={}),"function"!=typeof q)throw"no callback";return W(_,l,[e],function(_){return T(h6(_.data[0],_.data[1]))},0,q)}function h6(_,l){return d(_,l||{},0,0)}_.AsyncDeflate=f6,_.deflate=H6,_.deflateSync=h6;var F=function(){function _(_){this.s={},this.p=new A(0),this.ondata=_}return _.prototype.e=function(_){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var l=this.p.length,q=new A(l+_.length);q.set(this.p),q.set(_,l),this.p=q},_.prototype.c=function(_){this.d=this.s.i=_||!1;var _=this.s.b,l=o(this.p,this.o,this.s);this.ondata(D(l,_,this.s.b),this.d),this.o=D(l,this.s.b-32768),this.s.b=this.o.length,this.p=D(this.p,this.s.p/8|0),this.s.p&=7},_.prototype.push=function(_,l){this.e(_),this.c(l)},_}(),s6=(_.Inflate=F,function(_){this.ondata=_,E([x,function(){return[y,F]}],this,0,function(){var _=new F;onmessage=y(_)},7)});function R6(_,l,q){if(q||(q=l,l={}),"function"!=typeof q)throw"no callback";return W(_,l,[x],function(_){return T(Z(_.data[0],P(_.data[1])))},1,q)}function Z(_,l){return o(_,l)}_.AsyncInflate=s6,_.inflate=R6,_.inflateSync=Z;var P6=function(){function _(_,l){this.c=H(),this.l=0,this.v=1,I.call(this,_,l)}return _.prototype.push=function(_,l){I.prototype.push.call(this,_,l)},_.prototype.p=function(_,l){this.c.p(_),this.l+=_.length;_=d(_,this.o,this.v&&k6(this.o),l&&8,!l);this.v&&(w6(_,this.o),this.v=0),l&&(p(_,_.length-8,this.c.d()),p(_,_.length-4,this.l)),this.ondata(_,l)},_}(),l=(_.Gzip=P6,_.Compress=P6,function(_,l){E([e,C,function(){return[y,I,P6]}],this,J6.call(this,_,l),function(_){_=new P6(_.data);onmessage=y(_)},8)});function o6(_,l,q){if(q||(q=l,l={}),"function"!=typeof q)throw"no callback";return W(_,l,[e,C,function(){return[m6]}],function(_){return T(m6(_.data[0],_.data[1]))},2,q)}function m6(_,l){l=l||{};var q=H(),i=_.length,_=(q.p(_),d(_,l,k6(l),8)),x=_.length;return w6(_,l),p(_,x-8,q.d()),p(_,x-4,i),_}_.AsyncGzip=l,_.AsyncCompress=l,_.gzip=o6,_.compress=o6,_.gzipSync=m6,_.compressSync=m6;var G6=function(){function _(_){this.v=1,F.call(this,_)}return _.prototype.push=function(_,l){if(F.prototype.e.call(this,_),this.v){_=3<this.p.length?u6(this.p):4;if(_>=this.p.length&&!l)return;this.p=this.p.subarray(_),this.v=0}if(l){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}F.prototype.c.call(this,l)},_}(),a6=(_.Gunzip=G6,function(_){this.ondata=_,E([x,L,function(){return[y,F,G6]}],this,0,function(){var _=new G6;onmessage=y(_)},9)});function n6(_,l,q){if(q||(q=l,l={}),"function"!=typeof q)throw"no callback";return W(_,l,[x,L,function(){return[B6]}],function(_){return T(B6(_.data[0]))},3,q)}function B6(_,l){return o(_.subarray(u6(_),-8),l||new A(C6(_)))}_.AsyncGunzip=a6,_.gunzip=n6,_.gunzipSync=B6;var b6=function(){function _(_,l){this.c=a(),this.v=1,I.call(this,_,l)}return _.prototype.push=function(_,l){I.prototype.push.call(this,_,l)},_.prototype.p=function(_,l){this.c.p(_);_=d(_,this.o,this.v&&2,l&&4,!l);this.v&&(K6(_,this.o),this.v=0),l&&p(_,_.length-4,this.c.d()),this.ondata(_,l)},_}(),l=(_.Zlib=b6,function(_,l){E([e,J,function(){return[y,I,b6]}],this,J6.call(this,_,l),function(_){_=new b6(_.data);onmessage=y(_)},10)});function V6(_,l,q){if(q||(q=l,l={}),"function"!=typeof q)throw"no callback";return W(_,l,[e,J,function(){return[j6]}],function(_){return T(j6(_.data[0],_.data[1]))},4,q)}function j6(_,l){l=l||{};var q=a(),_=(q.p(_),d(_,l,2,4));return K6(_,l),p(_,_.length-4,q.d()),_}_.AsyncZlib=l,_.zlib=V6,_.zlibSync=j6;var N6=function(){function _(_){this.v=1,F.call(this,_)}return _.prototype.push=function(_,l){if(F.prototype.e.call(this,_),this.v){if(this.p.length<2&&!l)return;this.p=this.p.subarray(2),this.v=0}if(l){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}F.prototype.c.call(this,l)},_}(),O6=(_.Unzlib=N6,function(_){this.ondata=_,E([x,f,function(){return[y,F,N6]}],this,0,function(){var _=new N6;onmessage=y(_)},11)});function v6(_,l,q){if(q||(q=l,l={}),"function"!=typeof q)throw"no callback";return W(_,l,[x,f,function(){return[S6]}],function(_){return T(S6(_.data[0],P(_.data[1])))},5,q)}function S6(_,l){return o((L6(_),_.subarray(2,-4)),l)}_.AsyncUnzlib=O6,_.unzlib=v6,_.unzlibSync=S6;var U6=function(){function _(_){this.G=G6,this.I=F,this.Z=N6,this.ondata=_}return _.prototype.push=function(_,l){if(!this.ondata)throw"no stream handler";var q,i;this.s?this.s.push(_,l):(this.p&&this.p.length?((q=new A(this.p.length+_.length)).set(this.p),q.set(_,this.p.length)):this.p=_,2<this.p.length&&((i=this).s=new(31==this.p[0]&&139==this.p[1]&&8==this.p[2]?this.G:8!=(15&this.p[0])||7<this.p[0]>>4||(this.p[0]<<8|this.p[1])%31?this.I:this.Z)(function(){i.ondata.apply(i,arguments)}),this.s.push(this.p,l),this.p=null))},_}(),l=(_.Decompress=U6,function(){function _(_){this.G=a6,this.I=s6,this.Z=O6,this.ondata=_}return _.prototype.push=function(_,l){U6.prototype.push.call(this,_,l)},_}());function g6(_,l,q){if(q||(q=l,l={}),"function"!=typeof q)throw"no callback";return(31==_[0]&&139==_[1]&&8==_[2]?n6:8!=(15&_[0])||7<_[0]>>4||(_[0]<<8|_[1])%31?R6:v6)(_,l,q)}function A6(_,l){return(31==_[0]&&139==_[1]&&8==_[2]?B6:8!=(15&_[0])||7<_[0]>>4||(_[0]<<8|_[1])%31?Z:S6)(_,l)}_.AsyncDecompress=l,_.decompress=g6,_.decompressSync=A6;var Q6=function(_,l,q,i){for(var x in _){var e=_[x],x=l+x;e instanceof A?q[x]=[e,i]:Array.isArray(e)?q[x]=[e[0],n(i,e[1])]:Q6(e,x+"/",q,i)}},t6="undefined"!=typeof TextEncoder&&new TextEncoder,X6="undefined"!=typeof TextDecoder&&new TextDecoder,z6=0;try{X6.decode(c,{stream:!0}),z6=1}catch(M){}function D6(_){for(var l="",q=0;;){var i=_[q++],x=(127<i)+(223<i)+(239<i);if(q+x>_.length)return[l,D(_,q-1)];x?3==x?(i=((15&i)<<18|(63&_[q++])<<12|(63&_[q++])<<6|63&_[q++])-65536,l+=String.fromCharCode(55296|i>>10,56320|1023&i)):l+=String.fromCharCode(1&x?(31&i)<<6|63&_[q++]:(15&i)<<12|(63&_[q++])<<6|63&_[q++]):l+=String.fromCharCode(i)}}l=function(){function _(_){this.ondata=_,z6?this.t=new TextDecoder:this.p=c}return _.prototype.push=function(_,l){if(!this.ondata)throw"no callback";if(l=!!l,this.t){if(this.ondata(this.t.decode(_,{stream:!0}),l),l){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}}else{if(!this.p)throw"stream finished";var q=new A(this.p.length+_.length),_=(q.set(this.p),q.set(_,this.p.length),D6(q)),q=_[0],_=_[1];if(l){if(_.length)throw"invalid utf-8 data";this.p=null}else this.p=_;this.ondata(q,l)}},_}(),_.DecodeUTF8=l,l=function(){function _(_){this.ondata=_}return _.prototype.push=function(_,l){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(h(_),this.d=l||!1)},_}();function h(_,l){if(l){for(var q=new A(_.length),i=0;i<_.length;++i)q[i]=_.charCodeAt(i);return q}if(t6)return t6.encode(_);for(var x=_.length,e=new A(_.length+(_.length>>1)),T=0,W=function(_){e[T++]=_},i=0;i<x;++i){T+5>e.length&&((y=new A(T+8+(x-i<<1))).set(e),e=y);var y=_.charCodeAt(i);y<128||l?W(y):(y<2048?W(192|y>>6):(55295<y&&y<57344?(W(240|(y=65536+(1047552&y)|1023&_.charCodeAt(++i))>>18),W(128|y>>12&63)):W(224|y>>12),W(128|y>>6&63)),W(128|63&y))}return D(e,0,T)}function c6(_,l){if(l){for(var q="",i=0;i<_.length;i+=16384)q+=String.fromCharCode.apply(null,_.subarray(i,i+16384));return q}if(X6)return X6.decode(_);l=D6(_);if(l[1].length)throw"invalid utf-8 data";return l[0]}_.EncodeUTF8=l,_.strToU8=h,_.strFromU8=c6;function $6(_){return 1==_?3:_<6?2:9==_?1:0}function r6(_,l){return l+30+k(_,l+26)+k(_,l+28)}function _U(_,l,q){var i=k(_,l+28),x=c6(_.subarray(l+46,l+46+i),!(2048&k(_,l+8))),i=l+46+i,e=K(_,l+20),q=q&&4294967295==e?qU(_,i):[e,K(_,l+24),K(_,l+42)],e=q[0],T=q[1],q=q[2];return[k(_,l+10),e,T,x,i+k(_,l+30)+k(_,l+32),q]}function s(_){var l=0;if(_)for(var q in _){q=_[q].length;if(65535<q)throw"extra field too long";l+=q+4}return l}function R(_,l,q,i,x,e,T,W){var y=i.length,E=q.extra,d=W&&W.length,I=s(E),x=(p(_,l,null!=T?33639248:67324752),l+=4,null!=T&&(_[l++]=20,_[l++]=q.os),_[l]=20,l+=2,_[l++]=q.flag<<1|(null==e&&8),_[l++]=x&&8,_[l++]=255&q.compression,_[l++]=q.compression>>8,new Date(null==q.mtime?Date.now():q.mtime)),F=x.getFullYear()-1980;if(F<0||119<F)throw"date not in range 1980-2099";if(p(_,l,F<<25|x.getMonth()+1<<21|x.getDate()<<16|x.getHours()<<11|x.getMinutes()<<5|x.getSeconds()>>>1),l+=4,null!=e&&(p(_,l,q.crc),p(_,l+4,e),p(_,l+8,q.size)),p(_,l+12,y),p(_,l+14,I),l+=16,null!=T&&(p(_,l,d),p(_,l+6,q.attrs),p(_,l+10,T),l+=14),_.set(i,l),l+=y,I)for(var Y in E){var M=E[Y],Z=M.length;p(_,l,+Y),p(_,l+2,Z),_.set(M,l+4),l+=4+Z}d&&(_.set(W,l),l+=d)}function lU(_,l,q,i,x){p(_,l,101010256),p(_,l+8,q),p(_,l+10,q),p(_,l+12,i),p(_,l+16,x)}var qU=function(_,l){for(;1!=k(_,l);l+=4+k(_,l+2));return[p6(_,l+12),p6(_,l+4),p6(_,l+20)]},iU=function(){function _(_){this.filename=_,this.c=H(),this.size=0,this.compression=0}return _.prototype.process=function(_,l){this.ondata(null,_,l)},_.prototype.push=function(_,l){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(_),this.size+=_.length,l&&(this.crc=this.c.d()),this.process(_,l||!1)},_}(),l=(_.ZipPassThrough=iU,function(){function _(_,l){var q=this;l=l||{},iU.call(this,_),this.d=new I(l,function(_,l){q.ondata(null,_,l)}),this.compression=8,this.flag=$6(l.level)}return _.prototype.process=function(_,l){try{this.d.push(_,l)}catch(_){this.ondata(_,null,l)}},_.prototype.push=function(_,l){iU.prototype.push.call(this,_,l)},_}()),l=(_.ZipDeflate=l,function(){function _(_,l){var i=this;l=l||{},iU.call(this,_),this.d=new f6(l,function(_,l,q){i.ondata(_,l,q)}),this.compression=8,this.flag=$6(l.level),this.terminate=this.d.terminate}return _.prototype.process=function(_,l){this.d.push(_,l)},_.prototype.push=function(_,l){iU.prototype.push.call(this,_,l)},_}()),l=(_.AsyncZipDeflate=l,function(){function _(_){this.ondata=_,this.u=[],this.d=1}return _.prototype.add=function(i){var x=this;if(2&this.d)throw"stream finished";var _=h(i.filename),l=_.length,q=i.comment,e=q&&h(q),q=l!=i.filename.length||e&&q.length!=e.length,T=l+s(i.extra)+30;if(65535<l)throw"filename too long";function W(){for(var _=0,l=y;_<l.length;_++)x.ondata(null,l[_],!1);y=[]}var l=new A(T),y=(R(l,0,i,_,q),[l]),E=this.d,d=(this.d=0,this.u.length),I=n(i,{f:_,u:q,o:e,t:function(){i.terminate&&i.terminate()},r:function(){var _;W(),E&&((_=x.u[d+1])?_.r():x.d=1),E=1}}),F=0;i.ondata=function(_,l,q){_?(x.ondata(_,l,q),x.terminate()):(F+=l.length,y.push(l),q?(_=new A(16),p(_,0,134695760),p(_,4,i.crc),p(_,8,F),p(_,12,i.size),y.push(_),I.c=F,I.b=T+F+16,I.crc=i.crc,I.size=i.size,E&&I.r(),E=1):E&&W())},this.u.push(I)},_.prototype.end=function(){var _=this;if(2&this.d){if(1&this.d)throw"stream finishing";throw"stream finished"}this.d?this.e():this.u.push({r:function(){1&_.d&&(_.u.splice(-1,1),_.e())},t:function(){}}),this.d=3},_.prototype.e=function(){for(var _=0,l=0,q=0,i=0,x=this.u;i<x.length;i++)q+=46+(e=x[i]).f.length+s(e.extra)+(e.o?e.o.length:0);for(var e,T=new A(q+22),W=0,y=this.u;W<y.length;W++)R(T,_,e=y[W],e.f,e.u,e.c,l,e.o),_+=46+e.f.length+s(e.extra)+(e.o?e.o.length:0),l+=e.b;lU(T,_,this.u.length,q,l),this.ondata(null,T,!0),this.d=2},_.prototype.terminate=function(){for(var _=0,l=this.u;_<l.length;_++)l[_].t();this.d=2},_}());function xU(_,l,Z){if(Z||(Z=l,l={}),"function"!=typeof Z)throw"no callback";function p(){for(var _=0;_<f.length;++_)f[_]()}function w(){for(var _=new A(L+22),l=K,q=L-K,i=L=0;i<y;++i){var x=J[i];try{var e=x.c.length,T=(R(_,L,x,x.f,x.u,e),30+x.f.length+s(x.extra)),W=L+T;_.set(x.c,W),R(_,K,x,x.f,x.u,e,L,x.m),K+=16+T+(x.m?x.m.length:0),L=W+e}catch(_){return Z(_,null)}}lU(_,K,J.length,q,l),Z(null,_)}var u={},C=(Q6(_,"",u,l),EU.keys(u)),k=C.length,K=0,L=0,y=k,J=Array(k),f=[];k||w();for(var q=0;q<y;++q)!function(q){function _(_,l){_?(p(),Z(_,null)):(_=l.length,J[q]=n(e,{size:W,crc:T.d(),c:l,f:y,m:I,u:E!=i.length||I&&d.length!=F,compression:M}),K+=30+E+Y+_,L+=76+2*(E+Y)+(F||0)+_,--k||w())}var i=C[q],l=u[i],x=l[0],e=l[1],T=H(),W=x.length,y=(T.p(x),h(i)),E=y.length,d=e.comment,I=d&&h(d),F=I&&I.length,Y=s(e.extra),M=0==e.level?0:8;if(65535<E&&_("filename too long",null),M)if(W<16e4)try{_(null,h6(x,e))}catch(q){_(q,null)}else f.push(H6(x,e,_));else _(null,x)}(q);return p}function eU(_,l){var q,i={},x=[],e=(Q6(_,"",i,l=l||{}),0),T=0;for(q in i){var W=i[q],y=W[0],W=W[1],E=0==W.level?0:8,d=(k=h(q)).length,I=W.comment,F=I&&h(I),Y=F&&F.length,M=s(W.extra);if(65535<d)throw"filename too long";var Z=E?h6(y,W):y,p=Z.length,w=H();w.p(y),x.push(n(W,{size:y.length,crc:w.d(),c:Z,f:k,m:F,u:d!=q.length||F&&I.length!=Y,o:e,compression:E})),e+=30+d+M+p,T+=76+2*(d+M)+(Y||0)+p}for(var u=new A(T+22),_=e,l=T-e,C=0;C<x.length;++C){R(u,(k=x[C]).o,k,k.f,k.u,k.c.length);var k,K=30+k.f.length+s(k.extra);u.set(k.c,k.o+K),R(u,e,k,k.f,k.u,k.c.length,k.o,k.m),e+=16+K+(k.m?k.m.length:0)}return lU(u,e,x.length,l,_),u}_.Zip=l,_.zip=xU,_.zipSync=eU;var TU=function(){function _(){}return _.prototype.push=function(_,l){this.ondata(null,_,l)},_.compression=0,_}(),l=(_.UnzipPassThrough=TU,function(){function _(){var q=this;this.i=new F(function(_,l){q.ondata(null,_,l)})}return _.prototype.push=function(l,q){try{this.i.push(l,q)}catch(_){this.ondata(_,l,q)}},_.compression=8,_}()),l=(_.UnzipInflate=l,function(){function _(_,l){var i=this;l<32e4?this.i=new F(function(_,l){i.ondata(null,_,l)}):(this.i=new s6(function(_,l,q){i.ondata(_,l,q)}),this.terminate=this.i.terminate)}return _.prototype.push=function(_,l){this.i.terminate&&(_=D(_,0)),this.i.push(_,l)},_.compression=8,_}()),l=(_.AsyncUnzipInflate=l,function(){function _(_){this.onfile=_,this.k=[],this.o={0:TU},this.p=c}return _.prototype.push=function(_,l){var F=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(0<this.c){var q=Math.min(this.c,_.length),i=_.subarray(0,q);if(this.c-=q,this.d?this.d.push(i,!this.c):this.k[0].push(i),(_=_.subarray(q)).length)return this.push(_,l)}else{var Y=0,M=0,Z=void 0,p=void 0;this.p.length?_.length?((p=new A(this.p.length+_.length)).set(this.p),p.set(_,this.p.length)):p=this.p:p=_;for(var w=p.length,u=this.c,i=u&&this.d,C=this;M<w-4&&"break"!==function(){var i,_,l,q,x,e,T,W,y,E,d,I=K(p,M);return 67324752==I?(Y=1,Z=M,C.d=null,C.c=0,l=k(p,M+6),i=k(p,M+8),_=2048&l,l=8&l,q=k(p,M+26),x=k(p,M+28),M+30+q+x<w&&(C.k.unshift(e=[]),Y=2,W=K(p,M+18),y=K(p,M+22),E=c6(p.subarray(M+30,M+=30+q),!_),4294967295==W?(q=l?[-2]:qU(p,M),W=q[0],y=q[1]):l&&(W=-1),M+=x,C.c=W,d={name:E,compression:i,start:function(){if(!d.ondata)throw"no callback";if(W){var _=F.o[i];if(!_)throw"unknown compression type "+i;(T=W<0?new _(E):new _(E,W,y)).ondata=function(_,l,q){d.ondata(_,l,q)};for(var l=0,q=e;l<q.length;l++)T.push(q[l],!1);F.k[0]==e&&F.c?F.d=T:T.push(c,!0)}else d.ondata(null,c,!0)},terminate:function(){T&&T.terminate&&T.terminate()}},0<=W&&(d.size=W,d.originalSize=y),C.onfile(d)),"break"):u?134695760==I?(Z=M+=12+(-2==u&&8),Y=3,C.c=0,"break"):33639248==I?(Z=M-=4,Y=3,C.c=0,"break"):void 0:void 0}();++M);if(this.p=c,u<0&&(q=p.subarray(0,Y?Z-12-(-2==u&&8)-(134695760==K(p,Z-16)&&4):M),i?i.push(q,!!Y):this.k[+(2==Y)].push(q)),2&Y)return this.push(p.subarray(M),l);this.p=p.subarray(M)}if(l){if(this.c)throw"invalid zip file";this.p=null}},_.prototype.register=function(_){this.o[_.compression]=_},_}());function WU(W,y){if("function"!=typeof y)throw"no callback";for(var E=[],d=function(){for(var _=0;_<E.length;++_)E[_]()},I={},_=W.length-22;101010256!=K(W,_);--_)if(!_||65558<W.length-_)return void y("invalid zip file",null);var F=k(W,_+8),l=(F||y(null,{}),F),Y=K(W,_+16),M=4294967295==Y;if(M){if(_=K(W,_-12),101075792!=K(W,_))return void y("invalid zip file",null);l=F=K(W,_+32),Y=K(W,_+48)}for(var q=0;q<l;++q)!function(){function l(_,l){_?(d(),y(_,null)):(I[e]=l,--F||y(null,I))}var _=_U(W,Y,M),q=_[0],i=_[1],x=_[2],e=_[3],T=_[4],_=r6(W,_[5]);Y=T;if(q)if(8==q){T=W.subarray(_,_+i);if(i<32e4)try{l(null,Z(T,new A(x)))}catch(_){l(_,null)}else E.push(R6(T,{size:x},l))}else l("unknown compression type "+q,null);else l(null,D(W,_,_+i))}();return d}function yU(_){for(var l={},q=_.length-22;101010256!=K(_,q);--q)if(!q||65558<_.length-q)throw"invalid zip file";var i=k(_,q+8);if(!i)return{};var x=4294967295==(F=K(_,q+16));if(x){if(q=K(_,q-12),101075792!=K(_,q))throw"invalid zip file";i=K(_,q+32),F=K(_,q+48)}for(var e=0;e<i;++e){var T=_U(_,F,x),W=T[0],y=T[1],E=T[2],d=T[3],I=T[4],T=r6(_,T[5]),F=I;if(W){if(8!=W)throw"unknown compression type "+W;l[d]=Z(_.subarray(T,T+y),new A(E))}else l[d]=D(_,T,T+y)}return l}return _.Unzip=l,_.unzip=WU,_.unzipSync=yU,_}(),l6=function(_,l){this.textureLoader=_,this.manager=l},q6=(_(l6,EU,{_zS:function(_){_=_||{},y=[],P=this._AS();var l=this._BS(),l=this._CS(l,_),l=this._DS(l),q=this._ES(),i=(new E6)._zS(q);return this._FS(q,i,l,_),E.externalAssetURIs=y,E},_AS:function(){var x=new Map;return"Connections"in F&&F.Connections.connections.forEach(function(_){var l=_[0],q=_[1],_=_[2],i=(x.has(l)||x.set(l,{parents:[],children:[]}),{ID:q,relationship:_}),i=(x.get(l).parents.push(i),x.has(q)||x.set(q,{parents:[],children:[]}),{ID:l,relationship:_});x.get(q).children.push(i)}),x},_BS:function(){var _={},l={};if("Video"in F.Objects){var q,i=F.Objects.Video;for(q in i){var x,e,T,W=i[q];_[x=parseInt(q)]=W.RelativeFilename||W.Filename,"Content"in W&&(T=W.Content instanceof ArrayBuffer&&0<W.Content.byteLength,e="string"==typeof W.Content&&""!==W.Content,(T||e)&&(T=this._lS(i[q]),l[W.RelativeFilename||W.Filename]=T))}}for(x in _){var y=_[x];l[y]!==K?_[x]=l[y]:_[x]=_[x].split("\\").pop()}return _},_lS:function(_){var l,q=_.Content,i=_.RelativeFilename||_.Filename,x=i.slice(i.lastIndexOf(".")+1).toLowerCase();switch(x){case"bmp":l="image/bmp";break;case"jpg":case"jpeg":l="image/jpeg";break;case"png":l="image/png";break;case"tif":l="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",i),l="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+x+'" is not supported.')}return"string"==typeof q?"data:"+l+";base64,"+q:(_=new Uint8Array(q),e.URL.createObjectURL(new Blob([_],{type:l})))},_CS:function(_,l){var q=new Map;if("Texture"in F.Objects){var i,x=F.Objects.Texture;for(i in x){var e=this.parseTexture(x[i],_,l);q.set(parseInt(i),e)}}return q},parseTexture:function(_,l,q){var i,x,_=P.get(_.id).children;if(_!==K&&0<_.length&&l[_[0].ID]!==K&&(0===(x=l[_[0].ID]).indexOf("blob:")||0===x.indexOf("data:")))return(l=new Image).src=x,i=new D({image:l,dynamic:!0}),l.onload=function(){delete i.dynamic},i;return x&&(x=x.match(/[^\\/]*$/)[0],y.indexOf(x)<0&&y.push(x),q.assetsURIMap&&q.assetsURIMap[x]?x=q.assetsURIMap[x]:q.path&&(x=q.path+x)),x},_DS:function(_){var l=new Map;if("Material"in F.Objects){var q,i=F.Objects.Material;for(q in i){var x=this._kS(i[q],_);null!==x&&l.set(parseInt(q),x)}}return l},_kS:function(_,l){var q=_.id,i=_.attrName,x=_.ShadingModel;if("object"==typeof x&&x.value,!P.has(q))return null;x=this._gS(_,l,q),_=new o;return _.setValues(x),_.name=i,_},_gS:function(_,l,q){var i,x,e={},T=(_.BumpFactor&&(e.bumpScale=_.BumpFactor.value),_.Diffuse?e.diffuse=_.Diffuse.value:!_.DiffuseColor||"Color"!==_.DiffuseColor.type&&"ColorRGB"!==_.DiffuseColor.type||(e.diffuse=_.DiffuseColor.value),_.DisplacementFactor&&(e.displacementScale=_.DisplacementFactor.value),_.Emissive?e.emissive=_.Emissive.value:!_.EmissiveColor||"Color"!==_.EmissiveColor.type&&"ColorRGB"!==_.EmissiveColor.type||(e.emissive=_.EmissiveColor.value),_.EmissiveFactor&&1!==(i=parseFloat(_.EmissiveFactor.value))&&(x=e.emissive)!==K&&(x=Y.Default.getInternal().toColorArray(x),e.emissive=[x[0]*i,x[1]*i,x[2]*i]),_.Opacity&&(e.opacity=parseFloat(_.Opacity.value)),e.opacity<1&&(e.transparent=!0),_.ReflectionFactor&&(e.envMapIntensity=_.ReflectionFactor.value),_.Shininess&&(e.shininess=_.Shininess.value),_.Specular?e.specular=_.Specular.value:_.SpecularColor&&"Color"===_.SpecularColor.type&&(e.specular=_.SpecularColor.value),this);return P.get(q).children.forEach(function(_){switch(_.relationship){case"Bump":e.bumpMap=T._HS(l,_.ID);break;case"Maya|TEX_ao_map":e.aoMap=T._HS(l,_.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":e.map=T._HS(l,_.ID);break;case"DisplacementColor":e.displacementMap=T._HS(l,_.ID);break;case"EmissiveColor":e.emissiveMap=T._HS(l,_.ID);break;case"NormalMap":case"Maya|TEX_normal_map":e.normalMap=T._HS(l,_.ID);break;case"ReflectionColor":e.envMap=T._HS(l,_.ID);break;case"SpecularColor":e.specularMap=T._HS(l,_.ID);break;case"TransparentColor":case"TransparencyFactor":e.alphaMap=T._HS(l,_.ID),e.transparent=!0}}),e},_HS:function(_,l){return"LayeredTexture"in F.Objects&&l in F.Objects.LayeredTexture&&(console.warn("layered textures are not supported."),l=P.get(l).children[0].ID),_.get(l)},_ES:function(){var _={},l={};if("Deformer"in F.Objects){var q,i=F.Objects.Deformer;for(q in i){var x,e=i[q],T=P.get(parseInt(q));"Skin"===e.attrType?((x=this._mS(T,i)).ID=q,1<T.parents.length&&console.warn("skeleton attached to more than one geometry is not supported."),x.geometryID=T.parents[0].ID,_[q]=x):"BlendShape"===e.attrType&&((x={id:q}).rawTargets=this._nS(T,i),x.id=q,1<T.parents.length&&console.warn("morph target attached to more than one geometry is not supported."),l[q]=x)}}return{skeletons:_,morphTargets:l}},_mS:function(_,q){var i=[];return _.children.forEach(function(_){var l=q[_.ID];"Cluster"===l.attrType&&(_={ID:_.ID,indices:[],weights:[],transformLink:(new u).fromArray(l.TransformLink.a)},"Indexes"in l&&(_.indices=l.Indexes.a,_.weights=l.Weights.a),i.push(_))}),{rawBones:i,bones:[]}},_nS:function(_,l){for(var q=[],i=0;i<_.children.length;i++){var x=_.children[i],e=l[x.ID],T={name:e.attrName,initialWeight:e.DeformPercent,id:e.id,fullWeights:e.FullWeights.a};if("BlendShapeChannel"!==e.attrType)return;T.geoID=P.get(parseInt(x.ID)).children.filter(function(_){return _.relationship===K})[0].ID,q.push(T)}return q},_FS:function(_,l,q,i){E=new s;var x=this._oS(_.skeletons,l,q),e=F.Objects.Model,T=this;x.forEach(function(l){var _=e[l.ID],_=(T._IS(l,_),P.get(l.ID));_&&(_.parents.forEach(function(_){_=x.get(_.ID);_!==K&&_.add(l)}),null==l.getParent()&&E.add(l))}),this._JS(_.skeletons,l,x),E.traverse(function(_){var l,q=_.userData.transformData;q&&((l=_.getParent())&&(q.parentMatrix=l.matrix,q.parentMatrixWorld=l.matrixWorld),l=A(q),_.applyMatrix4(l))}),E.materialMap=q,E.animations=(new d6)._zS(i)},_oS:function(_,l,q){var i,x=new Map,e=F.Objects.Model;for(i in e){var T=parseInt(i),W=e[i],y=P.get(T),E=y?this._pS(y,_,T,W.attrName):null;E||((E="Mesh"===W.attrType?this._sS(y,l,q):new s).name=W.attrName?d(W.attrName):"",W.uid||(W.uid=Y.Math.generateIncreasingID()),E.uid=W.uid,E.ID=T),this._uS(E,W),x.set(T,E)}return x},_pS:function(_,l,x,e){var T=null;return _.parents.forEach(function(q){for(var _ in l){var i=l[_];i.rawBones.forEach(function(_,l){_.ID===q.ID&&((T=new s).isBone=!0,T.matrixWorld.copy(_.transformLink),T.name=e?d(e):"",T.ID=x,i.bones[l]=T)})}}),T},_rS:function(_){var l,q;if(_.children.forEach(function(_){_=F.Objects.NodeAttribute[_.ID];_!==K&&(q=_)}),q===K)l=new Object3D;else{var _=q.LightType===K?0:q.LightType.value,i=16777215,x=(q.Color!==K&&(i=(new Color).fromArray(q.Color.value)),q.Intensity===K?1:q.Intensity.value/100),e=(q.CastLightOnObject!==K&&0===q.CastLightOnObject.value&&(x=0),0);q.FarAttenuationEnd!==K&&(e=q.EnableFarAttenuation!==K&&0===q.EnableFarAttenuation.value?0:q.FarAttenuationEnd.value);switch(_){case 0:l=new PointLight(i,x,e,1);break;case 1:l=new DirectionalLight(i,x);break;case 2:var T=Math.PI/3,W=(q.InnerAngle!==K&&(T=k(q.InnerAngle.value)),0);q.OuterAngle!==K&&(W=k(q.OuterAngle.value),W=Math.max(W,1)),l=new SpotLight(i,x,e,T,W,1);break;default:console.warn("Unknown light type "+q.LightType.value+", defaulting to a PointLight."),l=new PointLight(i,x)}q.CastShadows!==K&&1===q.CastShadows.value&&(l.castShadow=!0)}return l},_sS:function(_,l,q){var i=null,x=null,e=[];return _.children.forEach(function(_){l.has(_.ID)&&(i=l.get(_.ID)),q.has(_.ID)&&e.push(q.get(_.ID))}),x=1<e.length?e:1==e.length?e[0]:((_=q.has(-1))||(_=(new o).setValues({name:"__missing__"}),q.set(-1,_)),_),i.FBX_Deformer,(_=new W(i,x)).normalizeSkinWeights(),_},_tS:function(_,l){},_uS:function(_,l){var q={};"InheritType"in l&&(q.inheritType=parseInt(l.InheritType.value)),"RotationOrder"in l?q.eulerOrder=j(l.RotationOrder.value):q.eulerOrder="ZYX","Lcl_Translation"in l&&(q.translation=l.Lcl_Translation.value),"PreRotation"in l&&(q.preRotation=l.PreRotation.value),"Lcl_Rotation"in l&&(q.rotation=l.Lcl_Rotation.value),"PostRotation"in l&&(q.postRotation=l.PostRotation.value),"Lcl_Scaling"in l&&(q.scale=l.Lcl_Scaling.value),"ScalingOffset"in l&&(q.scalingOffset=l.ScalingOffset.value),"ScalingPivot"in l&&(q.scalingPivot=l.ScalingPivot.value),"RotationOffset"in l&&(q.rotationOffset=l.RotationOffset.value),"RotationPivot"in l&&(q.rotationPivot=l.RotationPivot.value),_.userData.transformData=q},_IS:function(q,_){"LookAtProperty"in _&&P.get(q.ID).children.forEach(function(_){var l;"LookAtProperty"===_.relationship&&"Lcl_Translation"in(_=F.Objects.Model[_.ID])&&(_=_.Lcl_Translation.value,q.target!==K?(q.target.matrix.setPosition({x:_[0],y:_[1],z:_[2]}),E.add(q.target)):(l=q.matrix.getPosition(),q.matrix.lookAt({x:_[0],y:_[1],z:_[2]},l)))})},_JS:function(_,l,q){var i,x=this._KS();for(i in _){var e=_[i];P.get(parseInt(e.ID)).parents.forEach(function(_){l.has(_.ID)&&(_=_.ID,P.get(_).parents.forEach(function(_){q.has(_.ID)&&(q.get(_.ID).skeleton=[e.bones,function(_){for(var l=[],q=new u,i=0,x=_.length;i<x;i++)q.copy(_[i].matrixWorld).invert().toArray(l,16*i);return l}(e.bones),x[_.ID]||new u])}))})}},_KS:function(){var l={};if("Pose"in F.Objects){var _,q,i=F.Objects.Pose;for(_ in i)"BindPose"===i[_].attrType&&(q=i[_].PoseNode,Array.isArray(q)?q.forEach(function(_){l[_.Node]=(new u).fromArray(_.Matrix.a)}):l[q.Node]=(new u).fromArray(q.Matrix.a))}return l},_LS:function(){var _,l,q;"GlobalSettings"in F&&"AmbientColor"in F.GlobalSettings&&(q=(l=F.GlobalSettings.AmbientColor.value)[0],_=l[1],l=l[2],0===q&&0===_&&0===l||(q=new Color(q,_,l),E.add(new AmbientLight(q,1))))}}),new Y.Math.Matrix4);function m(_,l,q){this.name="",this.array=_,this.itemSize=l,this.count=_!==K?_.length/l:0,this.normalized=!0===q,this.usage=Y.WebGLConstants.STATIC_DRAW,this.updateRange={offset:0,count:-1},this.version=0}_(R,EU,{_3s:function(_){return Array.isArray(_)?this.index=new(65535<arrayMax(_)?l:a)(_,1):this.index=_,this},_4s:function(_,l){return this.attributes[_]=l,this},_5s:function(_){return delete this.attributes[_],this},_6s:function(_){return this.attributes[_]!==K},applyMatrix4:function(_){var l=this.attributes.position,l=(l!==K&&(l.applyMatrix4(_),l.needsUpdate=!0),this.attributes.normal),q=(l!==K&&(q=(new Y.Math.Matrix3).getNormalMatrix(_),l.applyNormalMatrix(q),l.needsUpdate=!0),this.attributes.tangent);return q!==K&&(q.transformDirection(_),q.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},applyQuaternion:function(_){return q6.makeRotationFromQuaternion(_),this.applyMatrix4(q6),this},_MS:function(_,l,q){this.groups.push({start:_,count:l,materialIndex:q||0})},setFromPoints:function(_){for(var l=[],q=0,i=_.length;q<i;q++){var x=_[q];l.push(x.x,x.y,x.z||0)}return this._4s("position",new n(l,3)),this}}),EU.defineProperty(m.prototype,"needsUpdate",{set:function(_){!0===_&&this.version++}});var G=new C;function i6(_,l,q){m.call(this,new Int8Array(_),l,q)}function x6(_,l,q){m.call(this,new Uint8Array(_),l,q)}function e6(_,l,q){m.call(this,new Uint8ClampedArray(_),l,q)}function T6(_,l,q){m.call(this,new Int16Array(_),l,q)}function a(_,l,q){m.call(this,new Uint16Array(_),l,q)}function W6(_,l,q){m.call(this,new Int32Array(_),l,q)}function l(_,l,q){m.call(this,new Uint32Array(_),l,q)}function n(_,l,q){m.call(this,new Float32Array(_),l,q)}function y6(_,l,q){m.call(this,new Float64Array(_),l,q)}EU.assign(m.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(_){return this.usage=_,this},copy:function(_){return this.name=_.name,this.array=new _.array.constructor(_.array),this.itemSize=_.itemSize,this.count=_.count,this.normalized=_.normalized,this.usage=_.usage,this},_8s:function(_,l,q){_*=this.itemSize,q*=l.itemSize;for(var i=0,x=this.itemSize;i<x;i++)this.array[_+i]=l.array[q+i];return this},_9s:function(_){return this.array.set(_),this},copyColorsArray:function(_){for(var l=this.array,q=0,i=0,x=_.length;i<x;i++){var e=_[i];e===K?(l[q++]=1,l[q++]=1,l[q++]=1):(l[q++]=e.r,l[q++]=e.g,l[q++]=e.b)}return this},_7s:function(_){for(var l=this.array,q=0,i=0,x=_.length;i<x;i++){var e=_[i];e===K&&(e=new Vector2),l[q++]=e.x,l[q++]=e.y}return this},_as:function(_){for(var l=this.array,q=0,i=0,x=_.length;i<x;i++){var e=_[i];e===K&&(e=new C),l[q++]=e.x,l[q++]=e.y,l[q++]=e.z}return this},_bs:function(_){for(var l=this.array,q=0,i=0,x=_.length;i<x;i++){var e=_[i];e===K&&(e=new I),l[q++]=e.x,l[q++]=e.y,l[q++]=e.z,l[q++]=e.w}return this},applyMatrix3:function(_){for(var l=0,q=this.count;l<q;l++)G.x=this.getX(l),G.y=this.getY(l),G.z=this.getZ(l),G.applyMatrix3(_),this.setXYZ(l,G.x,G.y,G.z);return this},applyMatrix4:function(_){for(var l=0,q=this.count;l<q;l++)G.x=this.getX(l),G.y=this.getY(l),G.z=this.getZ(l),G.applyMatrix4(_),this.setXYZ(l,G.x,G.y,G.z);return this},applyNormalMatrix:function(_){for(var l=0,q=this.count;l<q;l++)G.x=this.getX(l),G.y=this.getY(l),G.z=this.getZ(l),G.applyNormalMatrix(_),this.setXYZ(l,G.x,G.y,G.z);return this},transformDirection:function(_){for(var l=0,q=this.count;l<q;l++)G.x=this.getX(l),G.y=this.getY(l),G.z=this.getZ(l),G.transformDirection(_),this.setXYZ(l,G.x,G.y,G.z);return this},set:function(_,l){return this.array.set(_,l=l===K?0:l),this},getX:function(_){return this.array[_*this.itemSize]},setX:function(_,l){return this.array[_*this.itemSize]=l,this},getY:function(_){return this.array[_*this.itemSize+1]},setY:function(_,l){return this.array[_*this.itemSize+1]=l,this},getZ:function(_){return this.array[_*this.itemSize+2]},setZ:function(_,l){return this.array[_*this.itemSize+2]=l,this},getW:function(_){return this.array[_*this.itemSize+3]},setW:function(_,l){return this.array[_*this.itemSize+3]=l,this},setXY:function(_,l,q){return _*=this.itemSize,this.array[_+0]=l,this.array[_+1]=q,this},setXYZ:function(_,l,q,i){return _*=this.itemSize,this.array[_+0]=l,this.array[_+1]=q,this.array[_+2]=i,this},setXYZW:function(_,l,q,i,x){return _*=this.itemSize,this.array[_+0]=l,this.array[_+1]=q,this.array[_+2]=i,this.array[_+3]=x,this},onUpload:function(_){return this.onUploadCallback=_,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),(i6.prototype=EU.create(m.prototype)).constructor=i6,(x6.prototype=EU.create(m.prototype)).constructor=x6,(e6.prototype=EU.create(m.prototype)).constructor=e6,(T6.prototype=EU.create(m.prototype)).constructor=T6,a.prototype=EU.create(m.prototype),a.prototype.constructor=a,(W6.prototype=EU.create(m.prototype)).constructor=W6,l.prototype=EU.create(m.prototype),l.prototype.constructor=l,(n.prototype=EU.create(m.prototype)).constructor=n,(y6.prototype=EU.create(m.prototype)).constructor=y6;var E6=function(){},d6=(_(E6,EU,{_zS:function(_){var l=new Map;if("Geometry"in F.Objects){var q,i=F.Objects.Geometry;for(q in i){var x=P.get(parseInt(q)),x=this._2s(x,i[q],_);l.set(parseInt(q),x)}}return l},_2s:function(_,l,q){switch(l.attrType){case"Mesh":return this._1s(_,l,q);case"NurbsCurve":return this._PS(l)}},_1s:function(_,l,q){var i,x=q.skeletons,e=[],T=_.parents.map(function(_){return F.Objects.Model[_.ID]});if(0!==T.length)return i=_.children.reduce(function(_,l){return _=x[l.ID]!==K?x[l.ID]:_},null),_.children.forEach(function(_){q.morphTargets[_.ID]!==K&&e.push(q.morphTargets[_.ID])}),_=T[0],T={},"RotationOrder"in _&&(T.eulerOrder=j(_.RotationOrder.value)),"InheritType"in _&&(T.inheritType=parseInt(_.InheritType.value)),"GeometricTranslation"in _&&(T.translation=_.GeometricTranslation.value),"GeometricRotation"in _&&(T.rotation=_.GeometricRotation.value),"GeometricScaling"in _&&(T.scale=_.GeometricScaling.value),_=A(T),this._ZS(l,i,e,_)},_ZS:function(_,l,q,i){var x,e,T=new R,W=(_.attrName&&(T.name=_.attrName),this._YS(_,l)),y=this._XS(W),E=new n(y.vertex,3);return E.applyMatrix4(i),T._4s("position",E),0<y.colors.length&&T._4s("color",new n(y.colors,3)),l&&(T._4s("skinIndex",new a(y.weightsIndices,4)),T._4s("skinWeight",new n(y.vertexWeights,4)),T.FBX_Deformer=l),0<y.normal.length&&(E=(new Y.Math.Matrix3).getNormalMatrix(i),(l=new n(y.normal,3)).applyNormalMatrix(E),T._4s("normal",l)),y.uvs.forEach(function(_,l){var q="uv"+(l+1).toString();T._4s(q=0===l?"uv":q,new n(y.uvs[l],2))}),W.material&&"AllSame"!==W.material.mappingType&&(x=y.materialIndex[0],e=0,y.materialIndex.forEach(function(_,l){_!==x&&(T._MS(e,l-e,x),x=_,e=l)}),0<T.groups.length&&((l=(E=T.groups[T.groups.length-1]).start+E.count)!==y.materialIndex.length&&T._MS(l,y.materialIndex.length-l,x)),0===T.groups.length&&T._MS(0,y.materialIndex.length,y.materialIndex[0])),this._VS(T,_,q,i),T},_YS:function(_,l){var x={};if(x.vertexPositions=_.Vertices!==K?_.Vertices.a:[],x.vertexIndices=_.PolygonVertexIndex!==K?_.PolygonVertexIndex.a:[],_.LayerElementColor&&(x.color=this._RS(_.LayerElementColor[0])),_.LayerElementMaterial&&(x.material=this._QS(_.LayerElementMaterial[0])),_.LayerElementNormal&&(x.normal=this._TS(_.LayerElementNormal[0])),_.LayerElementUV){x.uv=[];for(var q=0;_.LayerElementUV[q];)_.LayerElementUV[q].UV&&x.uv.push(this._SS(_.LayerElementUV[q])),q++}return x.weightTable={},null!==l&&(x.skeleton=l).rawBones.forEach(function(q,i){q.indices.forEach(function(_,l){x.weightTable[_]===K&&(x.weightTable[_]=[]),x.weightTable[_].push({id:i,weight:q.weights[l]})})}),x},_XS:function(d){var I={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},F=0,Y=0,M=[],Z=[],p=[],w=[],u=[],C=[],k=this;return d.vertexIndices.forEach(function(q,i){var _,e,T,l,x=!1,W=(q<0&&(q^=-1,x=!0),[]),y=[];if(M.push(3*q,3*q+1,3*q+2),d.color&&(l=H(i,F,q,d.color),p.push(l[0],l[1],l[2])),d.skeleton){for(d.weightTable[q]!==K&&d.weightTable[q].forEach(function(_){y.push(_.weight),W.push(_.id)}),4<y.length&&(e=[0,0,0,0],T=[0,0,0,0],y.forEach(function(_,l){var i=_,x=W[l];T.forEach(function(_,l,q){_<i&&(q[l]=i,i=_,q=e[l],e[l]=x,x=q)})}),W=e,y=T);y.length<4;)y.push(0),W.push(0);for(var E=0;E<4;++E)u.push(y[E]),C.push(W[E])}d.normal&&(l=H(i,F,q,d.normal),Z.push(l[0],l[1],l[2])),d.material&&"AllSame"!==d.material.mappingType&&(_=H(i,F,q,d.material)[0]),d.uv&&d.uv.forEach(function(_,l){_=H(i,F,q,_);w[l]===K&&(w[l]=[]),w[l].push(_[0]),w[l].push(_[1])}),Y++,x&&(k._WS(I,d,M,_,Z,p,w,u,C,Y),F++,Y=0,M=[],Z=[],p=[],w=[],u=[],C=[])}),I},_WS:function(q,_,l,i,x,e,T,W,y,E){for(var d=2;d<E;d++)q.vertex.push(_.vertexPositions[l[0]]),q.vertex.push(_.vertexPositions[l[1]]),q.vertex.push(_.vertexPositions[l[2]]),q.vertex.push(_.vertexPositions[l[3*(d-1)]]),q.vertex.push(_.vertexPositions[l[3*(d-1)+1]]),q.vertex.push(_.vertexPositions[l[3*(d-1)+2]]),q.vertex.push(_.vertexPositions[l[3*d]]),q.vertex.push(_.vertexPositions[l[3*d+1]]),q.vertex.push(_.vertexPositions[l[3*d+2]]),_.skeleton&&(q.vertexWeights.push(W[0]),q.vertexWeights.push(W[1]),q.vertexWeights.push(W[2]),q.vertexWeights.push(W[3]),q.vertexWeights.push(W[4*(d-1)]),q.vertexWeights.push(W[4*(d-1)+1]),q.vertexWeights.push(W[4*(d-1)+2]),q.vertexWeights.push(W[4*(d-1)+3]),q.vertexWeights.push(W[4*d]),q.vertexWeights.push(W[4*d+1]),q.vertexWeights.push(W[4*d+2]),q.vertexWeights.push(W[4*d+3]),q.weightsIndices.push(y[0]),q.weightsIndices.push(y[1]),q.weightsIndices.push(y[2]),q.weightsIndices.push(y[3]),q.weightsIndices.push(y[4*(d-1)]),q.weightsIndices.push(y[4*(d-1)+1]),q.weightsIndices.push(y[4*(d-1)+2]),q.weightsIndices.push(y[4*(d-1)+3]),q.weightsIndices.push(y[4*d]),q.weightsIndices.push(y[4*d+1]),q.weightsIndices.push(y[4*d+2]),q.weightsIndices.push(y[4*d+3])),_.color&&(q.colors.push(e[0]),q.colors.push(e[1]),q.colors.push(e[2]),q.colors.push(e[3*(d-1)]),q.colors.push(e[3*(d-1)+1]),q.colors.push(e[3*(d-1)+2]),q.colors.push(e[3*d]),q.colors.push(e[3*d+1]),q.colors.push(e[3*d+2])),_.material&&"AllSame"!==_.material.mappingType&&(q.materialIndex.push(i),q.materialIndex.push(i),q.materialIndex.push(i)),_.normal&&(q.normal.push(x[0]),q.normal.push(x[1]),q.normal.push(x[2]),q.normal.push(x[3*(d-1)]),q.normal.push(x[3*(d-1)+1]),q.normal.push(x[3*(d-1)+2]),q.normal.push(x[3*d]),q.normal.push(x[3*d+1]),q.normal.push(x[3*d+2])),_.uv&&_.uv.forEach(function(_,l){q.uvs[l]===K&&(q.uvs[l]=[]),q.uvs[l].push(T[l][0]),q.uvs[l].push(T[l][1]),q.uvs[l].push(T[l][2*(d-1)]),q.uvs[l].push(T[l][2*(d-1)+1]),q.uvs[l].push(T[l][2*d]),q.uvs[l].push(T[l][2*d+1])})},_VS:function(q,i,_,x){var e;0!==_.length&&(q.morphTargetsRelative=!0,q.morphAttributes.position=[],e=this,_.forEach(function(_){_.rawTargets.forEach(function(_){var l=F.Objects.Geometry[_.geoID];l!==K&&e._US(q,i,l,x,_.name)})}))},_US:function(_,l,q,i,x){for(var l=l.PolygonVertexIndex!==K?l.PolygonVertexIndex.a:[],e=q.Vertices!==K?q.Vertices.a:[],T=q.Indexes!==K?q.Indexes.a:[],W=3*_.attributes.position.count,y=new Float32Array(W),E=0;E<T.length;E++){var d=3*T[E];y[d]=e[3*E],y[1+d]=e[3*E+1],y[2+d]=e[3*E+2]}W=new n(this._XS({vertexIndices:l,vertexPositions:y}).vertex,3);W.name=x||q.attrName,W.applyMatrix4(i),_.morphAttributes.position.push(W)},_TS:function(_){var l=_.MappingInformationType,q=_.ReferenceInformationType,i=_.Normals.a,x=[];return"IndexToDirect"===q&&("NormalIndex"in _?x=_.NormalIndex.a:"NormalsIndex"in _&&(x=_.NormalsIndex.a)),{dataSize:3,buffer:i,indices:x,mappingType:l,referenceType:q}},_SS:function(_){var l=_.MappingInformationType,q=_.ReferenceInformationType,i=[];return{dataSize:2,buffer:_.UV.a,indices:i="IndexToDirect"===q?_.UVIndex.a:i,mappingType:l,referenceType:q}},_RS:function(_){var l=_.MappingInformationType,q=_.ReferenceInformationType,i=[];return{dataSize:4,buffer:_.Colors.a,indices:i="IndexToDirect"===q?_.ColorIndex.a:i,mappingType:l,referenceType:q}},_QS:function(_){var l=_.MappingInformationType,q=_.ReferenceInformationType;if("NoMappingInformation"===l||!_.Materials)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:q};for(var i=_.Materials.a,x=[],e=0;e<i.length;++e)x.push(e);return{dataSize:1,buffer:i,indices:x,mappingType:l,referenceType:q}},_PS:function(_){if(F6===K)return console.error("The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new R;var l=parseInt(_.Order);if(isNaN(l))return console.error("Invalid Order %s given for geometry ID: %s",_.Order,_.id),new R;for(var q=l-1,l=_.KnotVector.a,i=[],x=_.Points.a,e=0,T=x.length;e<T;e+=4)i.push((new I).fromArray(x,e));if("Closed"===_.Form)i.push(i[0]);else if("Periodic"===_.Form)for(var W=q,y=l.length-1-W,e=0;e<q;++e)i.push(i[e]);_=new F6(q,l,i,W,y).getPoints(12*i.length);return(new R).setFromPoints(_)}}),function(){});function I6(_,l,q,i){for(var x=function(_,l,q){var i=q.length-_-1;if(l>=q[i])return i-1;if(l<=q[_])return _;for(var x=_,e=i,T=Math.floor((x+e)/2);l<q[T]||l>=q[T+1];)l<q[T]?e=T:x=T,T=Math.floor((x+e)/2);return T}(_,i,l),e=function(_,l,q,i){for(var x=[],e=[],T=[],W=x[0]=1;W<=q;++W){e[W]=l-i[_+1-W],T[W]=i[_+W]-l;for(var y=0,E=0;E<W;++E){var d=T[E+1],I=e[W-E],F=x[E]/(d+I);x[E]=y+d*F,y=I*F}x[W]=y}return x}(x,i,_,l),T=new I(0,0,0,0),W=0;W<=_;++W){var y=q[x-_+W],E=e[W],d=y.w*E;T.x+=y.x*d,T.y+=y.y*d,T.z+=y.z*d,T.w+=y.w*E}return T}_(d6,EU,{_zS:function(_){this.params=_;var l=[],q=this._qs();if(q!==K)for(var i in q){i=q[i],i=this._js(i);l.push(i)}return this.params=null,l},_qs:function(){if(F.Objects.AnimationCurve===K)return K;var _=this._ns(),_=(this._ms(_),this._ls(_));return this._ks(_)},_ns:function(){var _,l=F.Objects.AnimationCurveNode,q=new Map;for(_ in l){var i=l[_];null!==i.attrName.match(/S|R|T|DeformPercent/)&&(i={id:i.id,attr:i.attrName,curves:{}},q.set(i.id,i))}return q},_ms:function(_){var l,q=F.Objects.AnimationCurve;for(l in q){var i,x={id:q[l].id,times:q[l].KeyTime.a.map(b),values:q[l].KeyValueFloat.a},e=P.get(x.id);e!==K&&(i=e.parents[0].ID,(e=e.parents[0].relationship).match(/X/)?_.get(i).curves.x=x:e.match(/Y/)?_.get(i).curves.y=x:e.match(/Z/)?_.get(i).curves.z=x:e.match(/d|DeformPercent/)&&_.has(i)&&(_.get(i).curves.morph=x))}},_ls:function(W){var _,l=F.Objects.AnimationLayer,q=new Map;for(_ in l){var y=[],i=P.get(parseInt(_));i!==K&&(i.children.forEach(function(_,l){if(W.has(_.ID)){var q,i,x,e=W.get(_.ID);if(e.curves.x!==K||e.curves.y!==K||e.curves.z!==K){if(y[l]===K)if((i=P.get(_.ID).parents.filter(function(_){return _.relationship!==K})[0].ID)!==K){if((x=F.Objects.Model[i.toString()])===K)return;var T={modelName:x.attrName?d(x.attrName):"",ID:x.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};E.traverse(function(_){_.ID===x.id&&(T.transform=_.matrix,_.userData.transformData&&(T.eulerOrder=_.userData.transformData.eulerOrder))}),T.transform||(T.transform=new u),"PreRotation"in x&&(T.preRotation=x.PreRotation.value),"PostRotation"in x&&(T.postRotation=x.PostRotation.value),y[l]=T}y[l]&&(y[l][e.attr]=e)}else e.curves.morph!==K&&(y[l]===K&&(_=P.get(_.ID).parents.filter(function(_){return _.relationship!==K})[0].ID,q=P.get(_).parents[0].ID,q=P.get(q).parents[0].ID,i=P.get(q).parents[0].ID,T={modelName:(x=F.Objects.Model[i]).attrName?PropertyBinding.sanitizeNodeName(x.attrName):"",ID:x.id,morphName:F.Objects.Deformer[_].attrName},y[l]=T),y[l][e.attr]=e)}}),q.set(parseInt(_),y))}return q},_ks:function(_){var l,q=F.Objects.AnimationStack,i={};for(l in q){var x=P.get(parseInt(l)).children,x=_.get(x[0].ID);i[l]={name:q[l].attrName,layer:x}}return i},_js:function(_){var l=[],q=this,i=(_.layer.forEach(function(_){l=l.concat(q._ps(_))}),0);return l.forEach(function(_){i=Math.max(i,_.times[_.times.length-1])}),{name:_.name,duration:i,tracks:l}},_ps:function(_){var l=[],q=new C,i=new w,x=new C;return _.transform&&_.transform.decompose(q,i,x),q=q.toArray(),i=(new p).setFromQuaternion(i,_.eulerOrder).toArray(),x=x.toArray(),_.T!==K&&0<EU.keys(_.T.curves).length&&((q=this._hs(_.ID,_.T.curves,q,"position"))!==K&&l.push(q)),_.R!==K&&0<EU.keys(_.R.curves).length&&((q=this._gs(_.ID,_.R.curves,i,_.preRotation,_.postRotation,_.eulerOrder))!==K&&l.push(q)),_.S!==K&&0<EU.keys(_.S.curves).length&&((i=this._hs(_.ID,_.S.curves,x,"scale"))!==K&&l.push(i)),_.DeformPercent!==K&&(q=this._fs(_))!==K&&l.push(q),l},_hs:function(_,l,q,i){var x=this._es(l);return{type:"linear",name:_+"."+i,times:x,values:this._ds(x,l,q)}},_gs:function(_,l,q,i,x,e){l.x!==K&&(this._cs(l.x),l.x.values=l.x.values.map(k)),l.y!==K&&(this._cs(l.y),l.y.values=l.y.values.map(k)),l.z!==K&&(this._cs(l.z),l.z.values=l.z.values.map(k));for(var T=this._es(l),W=this._ds(T,l,q),y=(i!==K&&((i=i.map(k)).push(e),i=(new p).fromArray(i),i=(new w).setFromEuler(i)),x!==K&&((x=x.map(k)).push(e),x=(new p).fromArray(x),x=(new w).setFromEuler(x).inverse()),new w),E=new p,d=[],I=0;I<W.length;I+=3)E.set(W[I],W[I+1],W[I+2],e),y.setFromEuler(E),i!==K&&y.premultiply(i),x!==K&&y.multiply(x),y.toArray(d,I/3*4);return{type:"quaternion",name:_+".quaternion",times:T,values:d}},_fs:function(_){var l=_.DeformPercent.curves.morph,q=l.values.map(function(_){return _/100}),i=E.getObjectByName(_.modelName).morphTargetDictionary[_.morphName];return{type:"number",name:_.ID+".morphTargetInfluences["+i+"]",times:l.times,values:q}},_es:function(_){var l=[];if(_.x!==K&&(l=l.concat(_.x.times)),_.y!==K&&(l=l.concat(_.y.times)),1<(l=(l=_.z!==K?l.concat(_.z.times):l).sort(function(_,l){return _-l})).length){for(var q=1,i=l[0],x=1;x<l.length;x++){var e=l[x];e!==i&&(i=l[q]=e,q++)}l=l.slice(0,q)}return l},getInterpolatedKeyframeValues:function(_,l,q){for(var i=[],x=["x","y","z"],e=_.length,T=0;T<3;T++){var W=l[x[T]],y=q[T];if(W){var E,d=W.times,I=W.values,F=0;0!==d[0]&&(d=[0].concat(d),I=[y].concat(I));for(M=0;M<e;M++){for(var Y=_[M];F<d.length-1&&d[F+1]<Y;)F++;E=d[F+1]===d[F]?I[F]:(E=(Y-d[F])/(d[F+1]-d[F]),I[F]+(I[F+1]-I[F])*E),i[3*M+T]=E}}else for(var M=0;M<e;M++)i[3*M+T]=y}return i},_ds:function(_,l,q){if(this.params&&!1!==this.params.keyframeValuesInterpolation)return this.getInterpolatedKeyframeValues(_,l,q);var i=q,x=[],e=-1,T=-1,W=-1;return _.forEach(function(_){l.x&&(e=l.x.times.indexOf(_)),l.y&&(T=l.y.times.indexOf(_)),l.z&&(W=l.z.times.indexOf(_)),-1!==e?(_=l.x.values[e],x.push(_),i[0]=_):x.push(i[0]),-1!==T?(_=l.y.values[T],x.push(_),i[1]=_):x.push(i[1]),-1!==W?(_=l.z.values[W],x.push(_),i[2]=_):x.push(i[2])}),x},checkNeedInterpolate:function(q,_){function l(_){return Math.abs(q.values[_]-q.values[_-1])/(q.times[_]-q.times[_-1])}function i(_){var l=Math.abs(q.values[_]-q.values[_-1])%360;return(l=180<l?360-l:l)/(q.times[_]-q.times[_-1])}function x(_,l){return Math.max(_,l)/Math.min(_,l)}var e=1===_?2:_-1;return!(8<x(l(_),l(e))&&x(i(_),i(e))<1.2)},_cs:function(_){for(var l=1;l<_.values.length;l++){var q=_.values[l-1],i=_.values[l]-q,x=Math.abs(i);if(!(x<180)){var e=this.params?this.params.rotationInterpolation:K;if(!1!==e&&(!0===e||this.checkNeedInterpolate(_,l))){for(var e=x/179,T=i/e,W=q+T,x=_.times[l-1],y=(_.times[l]-x)/e,E=x+y,d=[],I=[];E<_.times[l];)d.push(E),E+=y,I.push(W),W+=T;_.times=t(_.times,l,d),_.values=t(_.values,l,I)}}}}});var F6=function(_,l,q,i,x){this.degree=_,this.knots=l,this._vs=[],this.startKnot=i||0,this.endKnot=x||this.knots.length-1;for(var e=0;e<q.length;++e){var T=q[e];this._vs[e]=new I(T.x,T.y,T.z,T.w)}this.getPoint=function(_,l){l=l||new C,_=this.knots[this.startKnot]+_*(this.knots[this.endKnot]-this.knots[this.startKnot]),_=I6(this.degree,this.knots,this._vs,_);return 1!==_.w&&_.divideScalar(_.w),l.set(_.x,_.y,_.z)},this.getPoints=function(_){_=_||5;for(var l=[],q=0;q<=_;q++)l.push(this.getPoint(q/_));return l}}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);