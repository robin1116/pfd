!function(H,X){"use strict";var H=H.ht,h=H.graph,t=H.Default,H=H.Color,O=null,G="px",F=t.getInternal(),r=F.getPinchDist,J=t.preventDefault,W=t.getTouchCount,g=t.startDragging;F.addMethod(t,{overviewBackground:H.widgetBackground,overviewMaskBackground:H.transparent,overviewContentBorderColor:H.widgetBorder,overviewContentBackground:H.background},!0),h.Overview=function(H){var X=this,h=X._view=F.createView(1,X);X._canvas=F.createCanvas(h),h.style.background=t.overviewBackground,h.appendChild(X._mask=F.createDiv()),X.setGraphView(H),X.addListeners()},t.def("ht.graph.Overview",X,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate","fixToRect"],_autoUpdate:!0,_fixToRect:!1,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:t.overviewMaskBackground,_contentBorderColor:t.overviewContentBorderColor,_contentBackground:t.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function(H){var X,h=this;h.gv!==H&&(X=h.gv,h.gv=H,X&&(X.removeViewListener(h.handleGraphViewChanged,h),X.ump(h.handleGraphViewPropertyChanged,h)),H&&(H.addViewListener(h.handleGraphViewChanged,h),H.mp(h.handleGraphViewPropertyChanged,h)),h.fp("graphView",X,H),h.redraw())},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(H){this.redraw()},handleGraphViewChanged:function(H){this._autoUpdate&&"validate"===H.kind&&this.redraw()},handleGraphViewPropertyChanged:function(H){"canvasBackground"!==H.property&&(!this.getFixToRect()||"zoom"!==H.property&&"translateX"!==H.property&&"translateY"!==H.property)||this.redraw()},redraw:function(){var H=this;H._redraw||(H._redraw=1,H.iv(50))},validateImpl:function(){var H,X,h,j,r,J,W,g,x,R,$,u,Y,a=this,d=a.gv,I=a._canvas,E=a.getWidth(),c=a.getHeight(),V=a._redraw,_=t.devicePixelRatio;d?(H=a._mask.style,X=d.getViewRect(),h=(Y=(Y=this.getFixToRect())?"boolean"==typeof Y?d.getContentRect():Y:d.getScrollRect()).x,j=Y.y,r=Y.width,J=Y.height,W=a._rate=Math.max(r/E,J/c),g=a._x=(E-r/W)/2,x=a._y=(c-J/W)/2,0!==X.width&&0!==X.height||a.hasRetry||(t.callLater(a.iv,a,O),a.hasRetry=!0),E===I.clientWidth&&c===I.clientHeight||(F.setCanvas(I,E,c),V=1),F.isSameRect(Y,a._scrollRect)||(a._scrollRect=Y,V=1),V&&(R=F.initContext(I),$=(Y=d.getDataModel()).getBackground()||a._contentBackground,u=a._contentBorderColor,R.clearRect(0,0,E*_,c*_),Y=Y.getBackground()&&0<Y.a("width")&&0<Y.a("height"),$&&!Y&&F.fillRect(R,g*_,x*_,r/W*_,J/W*_,$),F.translateAndScale(R,-h/W+g,-j/W+x,1/W),d._42(R),R.restore(),u&&F.drawBorder(R,u,g*_,x*_,r/W*_,J/W*_)),H.background=a._maskBackground,H.left=g+(X.x-h)/W+G,H.top=x+(X.y-j)/W+G,H.width=X.width/W+G,H.height=X.height/W+G,a._redraw=null):V&&((R=F.initContext(I)).clearRect(0,0,E*_,c*_),R.restore(),a._redraw=null)},center:function(H){var X,h,j,r,J,W=this,g=W.gv;g&&(X=g._zoom,h=g._29I,j=W._rate,J=W._scrollRect,H=t.getLogicalPoint(H,W._canvas),r=J.x+(H.x-W._x)*j,J=J.y+(H.y-W._y)*j,g.setTranslate((h.width/2-r)*X,(h.height/2-J)*X))},handle_mousedown:function(H){this.handle_touchstart(H)},handleWindowMouseUp:function(H){this.handleWindowTouchEnd(H)},handleWindowMouseMove:function(H){this.handleWindowTouchMove(H)},handle_mousewheel:function(H){this.handleScroll(H,H.wheelDelta)},handle_DOMMouseScroll:function(H){2===H.axis&&this.handleScroll(H,-H.detail)},handleScroll:function(H,X){J(H),this.gv&&(H=this.gv,0<X?H.scrollZoomIn():X<0&&H.scrollZoomOut())},handle_touchstart:function(H){var X,h,j;J(H),this.gv&&t.isLeftButton(H)&&(h=(X=this).gv,1===(j=W(H))?t.isDoubleClick(H)&&h.isResettable()?h.reset():(X.center(H),g(X,H)):2===j&&(X._dist=r(H),g(X,H)))},handleWindowTouchEnd:function(H){delete this._dist},handleWindowTouchMove:function(H){var X,h;this.gv&&(X=this._dist,1===(h=W(H))?this.center(H):2===h&&X!=O&&this.gv.handlePinch(O,r(H),X))}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);