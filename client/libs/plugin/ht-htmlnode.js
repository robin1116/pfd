!function(C){"use strict";var W="ht",x=C[W],$=function(){return document},U=function(){return $().body},y=function(u,p,Q){u.style.setProperty(p,Q,null)},d=function(A){return $().createElement(A)},t=function(){return d("div")},Q=function(){var p=d("canvas");return p},B=function(h,$){y(h,"-webkit-transform",$),y(h,"-ms-transform",$),y(h,"transform",$)},n=function(Z,r){y(Z,"-webkit-transform-origin",r),y(Z,"-ms-transform-origin",r),y(Z,"transform-origin",r)},v=function(X,A){X.appendChild(A)},N=function(m,x){m.removeChild(x)},V=C.parseInt,M=x.Default,Y=M.getInternal(),r=Y.addEventListener,G=(Y.removeEventListener,Math.PI),l="white-space",o="visibility",e="left",F="top",D="width",E="height",j="position",m="display",q="z-index",p="px",f="0 0",c="absolute",J="visible",R="hidden",h="none",H="block",z="nowrap",u="rgba(0, 0, 0, 0.005)";M.setImage("node_dragger","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAN9JREFUeNrsV9sNhDAMKyzQVdgARmGzrMJNUFZhAh6nfkVcG9PQgHSR8lEksJs6pnGuLCimSRzAa0yyBK9O4gy8GokU+O0kJOAwiQYg0LP1xNYDW3+0CfBYNb7VOuN4LAGpiOaYUhFDas9F2NPHDELNENJqaHgBgSQJ3ufakfQJqckERcOiK+Ae1FGWBNKGh9oX5WPpLpdNYfffijbsxTHh7VKP7388n1g1h7OKUoUuyGpJakQEuhwkZAKcDXVOdWcrOrL/feBVBHI/q8fcjE1nA9PpyHQ+NJ2Qi8A3AQYAOtS27fCoRY0AAAAASUVORK5CYII=");var S=x.graph.GraphView.prototype,w=S._42;S.adjustHtmlNodeIndex=!0,S._42=function(E,a){if(w.call(this,E,a),this.adjustHtmlNodeIndex)for(var l=this.getDataModel()._datas._as,F=l.length,n=1,S=0;F>S;S++){var v=l[S];if(v instanceof T){var c=this.getDataUI(v);y(c.$2f,q,n+""),y(c.$3f,q,n+1+""),n+=2}}};var i=x.HtmlNodeUI=function(u,Y){var E=this;i.superClass.constructor.call(E,u,Y);var e=E.$2f=t(),S=E.$3f=Q();y(e,j,c),y(e,o,R),y(e,l,z),S.draggable=!1,y(S,j,c),y(S,m,h),n(S,f),r(e,"change",function(m){var U=m.target,F=U.bind||U.getAttribute("bind"),Z=U.type&&"checkbox"===U.type?U.checked:U.value,l=Y.getContext();F&&l&&(l[F]=Z,E.$4f=JSON.stringify(l))}),["mousedown","touchstart","keydown","mousewheel","DOMMouseScroll"].forEach(function(x){r(e,x,this.$9f.bind(this))},E)};M.def(i,Y.ui().NodeUI,{_visible:!0,$11f:function(){var U=this,w=U.$3f,u=U._data,a=u.getDraggerImageWidth(),G=u.getDraggerImageHeight(),r=u.getDraggerImage(),W=Y.initContext(w);W.beginPath(),Y.setCanvas(w,a,G),Y.translateAndScale(W,0,0,1),W.clearRect(0,0,a,G),M.drawImage(W,M.getImage(r),0,0,a,G),W.restore()},_80o:function(T){i.superClass._80o.call(this,T);var g=this,C=g._data,k=C._padding,b=2*k,l=g.$2f,S=g.$3f,Q=g.gv,X=Q.getZoom(),Y=Q.getTranslateX(),r=Q.getTranslateY(),s=Q.getView(),U=g._83o,_=C._width,x=C._height,Z=U.position,N=U.rotation,w=(_-b)/C.$5f*X,d=(x-b)/C.$6f*X,K=g._html,I=C._html,f=C.getHtmlType();if("html"===f){var M=C.getContext()||{},P=g.$4f,L=C.$10f,z=JSON.stringify(M);K&&P&&K===I&&P===z||(g.$4f=z,g._html=I,l.innerHTML=L?L(M):I)}else if(null!=f){var $=C.getHtml();"ht"===f&&($=$.getView()),K&&K===$&&l.contains(K)||(g._html=$,l.innerHTML="",v(l,$))}if(!l.parentNode){var O=Q.$1f;if(!O){var a=t();y(a,j,c),y(a,q,"0"),O=Q.$1f=a;var A=Q._canvas.nextSibling;A?s.insertBefore(a,A):v(s,a)}v(O,l),v(O,S),C.onContentInitialized&&C.onContentInitialized(l)}if(C._scalable){var n=C.$5f,W=C.$6f;B(l,"rotate("+180*(N/G)+"deg) scale("+w+","+d+")"),y(l,D,""),y(l,E,""),y(l,e,(Z.x-n/X/2)*X+Y+p),y(l,F,(Z.y-W/X/2)*X+r+p)}else{var ye=V(l.style.width),xk=V(l.style.height),Ii=V((_-b)*X),cf=V((x-b)*X),bd="100%",Gc=l.children[0];y(Gc,D,bd),y(Gc,E,bd),(ye!==Ii||xk!==cf)&&(y(l,D,Ii+p),y(l,E,cf+p),"ht"===f&&I.invalidate()),B(l,"rotate("+180*(N/G)+"deg)"),y(l,e,(Z.x-Ii/X/2)*X+Y+p),y(l,F,(Z.y-cf/X/2)*X+r+p)}var Mp=g.dragRect;Q.isMovable(C)&&Q.isSelected(C)&&Mp?(T.save(),T.fillStyle=u,T.fillRect(Mp.x,Mp.y,Mp.width,Mp.height),T.restore(),y(S,e,Mp.x*X+Y+p),y(S,F,Mp.y*X+r+p),B(S,"scale("+X+","+X+")"),y(S,m,H),g.$11f()):y(S,m,h),y(l,o,this._visible?J:R)},dispose:function(){var Z=this.gv.$1f;this.$2f.parentNode===Z&&Z.removeChild(this.$2f),this.$3f.parentNode===Z&&Z.removeChild(this.$3f)},_84o:function(d){this._visible=d,y(this.$2f,o,d?J:R),y(this.$3f,m,d?H:h)},_3O:function(){var Z=this,$=Z.gv,B=Z._data;i.superClass._3O.call(Z);var N=B.getRect();$.isEditable(B)&&(Z.dragRect={x:N.x+N.width+B._padding,y:N.y+10,width:B.getDraggerImageWidth(),height:B.getDraggerImageHeight()},Z._68o(Z.dragRect))},rectIntersects:function(D){var Z=this._79o();return x.Default.intersection(Z,D)?!0:void 0},$9f:function(H){var W=this.gv,Y=this._data;W.sm().contains(Y)&&H.stopPropagation()}});var T=x.HtmlNode=function(){T.superClass.constructor.call(this)};x.Default.def(T,x.Node,{ms_ac:["html","context","scalable","padding","draggerImage","draggerImageWidth","draggerImageHeight"],_padding:x.Default.isTouchable?12:6,_image:null,_scalable:!0,_draggerImage:"node_dragger",_draggerImageWidth:20,_draggerImageHeight:20,setHtml:function(k){var q=this,g=q._html;q._html=k,"html"===q.getHtmlType()&&"Handlebars"in C&&(q.$10f=Handlebars.compile(k)),q.$13f(),q.fp("html",g,k)},setContext:function(T){var k=this,S=k._context;k._context=T,k.fp("context",S,T),k.$13f()},setScalable:function($){var y=this,u=y._scalable;y._scalable=$,y.fp("scalable",u,$),y.$13f()},getHtmlType:function(){var m=this._html;return m?"string"==typeof m?"html":m.getView?"ht":"dom":null},$13f:function(){var g=this,K=g._html,E=g.$10f;if(K){var B=t(),F=!1,m=g.getHtmlType();if(y(B,j,c),y(B,l,z),y(B,o,R),"html"===m?(B.innerHTML=E?E(g.getContext()||{}):K,F=!0):"ht"===m?(v(B,K.getView()),F=!0):"dom"===m&&(v(B,K),F=!0),F){var L=2*g._padding;v(U(),B),g.$5f=B.scrollWidth,g.$6f=B.scrollHeight,g._width=g.$5f+L,g._height=g.$6f+L,g._originWidth=g._width,g._originHeight=g._height,N(U(),B)}}},getUIClass:function(){return x.HtmlNodeUI}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);